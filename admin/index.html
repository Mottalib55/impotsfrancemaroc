<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - NetSalaire</title>

    <!-- IMPORTANT: No indexing -->
    <meta name="robots" content="noindex, nofollow">
    <meta name="googlebot" content="noindex, nofollow">

    <link href="/assets/css/tailwind.min.css" rel="stylesheet">
    <script defer src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <style>
        body { font-family: 'Inter', system-ui, sans-serif; }
        .card { transition: all 0.2s; }
        .card:hover { transform: translateY(-2px); box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
    </style>
</head>
<body class="bg-slate-900 min-h-screen">

    <!-- Access Control -->
    <div id="lockScreen" class="fixed inset-0 bg-slate-900 z-50 flex items-center justify-center">
        <div class="text-center">
            <div class="w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center text-white text-2xl font-bold mx-auto mb-4">N.</div>
            <h1 class="text-white text-xl font-semibold mb-2">Admin Dashboard</h1>
            <p class="text-slate-400 text-sm mb-6">Entrez le code d'acces</p>
            <input type="password" id="accessCode" placeholder="Code..."
                   class="bg-slate-800 border border-slate-600 rounded-lg px-4 py-3 text-white text-center w-48 focus:outline-none focus:border-indigo-500"
                   onkeypress="if(event.key==='Enter')checkAccess()">
            <br>
            <button onclick="checkAccess()" class="mt-4 bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg text-sm">
                Acceder
            </button>
            <p id="errorMsg" class="text-red-400 text-sm mt-3 hidden">Code incorrect</p>
        </div>
    </div>

    <script>
        const AUTH_DURATION = 24 * 60 * 60 * 1000; // 24 heures en ms

        function checkAccess() {
            const code = document.getElementById('accessCode').value;
            if (code === 'Sofia') {
                document.getElementById('lockScreen').style.display = 'none';
                // Sauvegarder avec expiration de 24h
                const expiry = Date.now() + AUTH_DURATION;
                localStorage.setItem('admin_auth', JSON.stringify({ granted: true, expiry: expiry }));
            } else {
                document.getElementById('errorMsg').classList.remove('hidden');
                document.getElementById('accessCode').value = '';
            }
        }

        // Verifier si deja authentifie (valide 24h)
        function isAuthenticated() {
            const auth = localStorage.getItem('admin_auth');
            if (!auth) return false;
            try {
                const { granted, expiry } = JSON.parse(auth);
                if (granted && expiry > Date.now()) return true;
                localStorage.removeItem('admin_auth'); // Expire, on supprime
            } catch (e) {}
            return false;
        }

        if (isAuthenticated()) {
            document.getElementById('lockScreen').style.display = 'none';
        }
    </script>

    <!-- Header -->
    <header class="bg-slate-800 border-b border-slate-700 px-6 py-4">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold">N.</div>
                <div>
                    <h1 class="text-white font-semibold">NetSalaire Admin</h1>
                    <p class="text-slate-400 text-xs">Dashboard prive</p>
                </div>
            </div>
            <a href="/" class="text-slate-400 hover:text-white text-sm flex items-center gap-2">
                <iconify-icon icon="lucide:external-link" width="16"></iconify-icon>
                Voir le site
            </a>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-6 py-8">

        <!-- Quick Stats -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            <div class="bg-slate-800 rounded-xl p-4 border border-slate-700">
                <p class="text-slate-400 text-sm">Pages FR</p>
                <p class="text-2xl font-bold text-white">15+</p>
            </div>
            <div class="bg-slate-800 rounded-xl p-4 border border-slate-700">
                <p class="text-slate-400 text-sm">Pages EN</p>
                <p class="text-2xl font-bold text-white">12+</p>
            </div>
            <div class="bg-slate-800 rounded-xl p-4 border border-slate-700">
                <p class="text-slate-400 text-sm">Simulateurs</p>
                <p class="text-2xl font-bold text-emerald-400">10</p>
            </div>
            <div class="bg-slate-800 rounded-xl p-4 border border-slate-700">
                <p class="text-slate-400 text-sm">Pays</p>
                <p class="text-2xl font-bold text-amber-400">2</p>
            </div>
        </div>

        <!-- Quick Links -->
        <h2 class="text-white font-semibold mb-4 flex items-center gap-2">
            <iconify-icon icon="lucide:link" width="20" class="text-indigo-400"></iconify-icon>
            Liens Rapides
        </h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            <a href="https://analytics.google.com/" target="_blank" class="card bg-slate-800 rounded-xl p-4 border border-slate-700 hover:border-indigo-500">
                <div class="w-10 h-10 bg-amber-500/20 rounded-lg flex items-center justify-center mb-3">
                    <iconify-icon icon="logos:google-analytics" width="24"></iconify-icon>
                </div>
                <p class="text-white font-medium">Google Analytics</p>
                <p class="text-slate-400 text-xs">Statistiques du site</p>
            </a>
            <a href="https://search.google.com/search-console" target="_blank" class="card bg-slate-800 rounded-xl p-4 border border-slate-700 hover:border-indigo-500">
                <div class="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center mb-3">
                    <iconify-icon icon="logos:google-icon" width="24"></iconify-icon>
                </div>
                <p class="text-white font-medium">Search Console</p>
                <p class="text-slate-400 text-xs">SEO & Indexation</p>
            </a>
            <a href="https://github.com/Mottalib55/impotsfrancemaroc" target="_blank" class="card bg-slate-800 rounded-xl p-4 border border-slate-700 hover:border-indigo-500">
                <div class="w-10 h-10 bg-slate-500/20 rounded-lg flex items-center justify-center mb-3">
                    <iconify-icon icon="mdi:github" width="24" class="text-white"></iconify-icon>
                </div>
                <p class="text-white font-medium">GitHub Repo</p>
                <p class="text-slate-400 text-xs">Code source</p>
            </a>
            <a href="https://pagespeed.web.dev/" target="_blank" class="card bg-slate-800 rounded-xl p-4 border border-slate-700 hover:border-indigo-500">
                <div class="w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center mb-3">
                    <iconify-icon icon="lucide:zap" width="24" class="text-green-400"></iconify-icon>
                </div>
                <p class="text-white font-medium">PageSpeed</p>
                <p class="text-slate-400 text-xs">Performance</p>
            </a>
        </div>

        <!-- Site Structure -->
        <h2 class="text-white font-semibold mb-4 flex items-center gap-2">
            <iconify-icon icon="lucide:folder-tree" width="20" class="text-indigo-400"></iconify-icon>
            Structure du Site
        </h2>
        <div class="grid md:grid-cols-2 gap-6 mb-8">

            <!-- France FR -->
            <div class="bg-slate-800 rounded-xl border border-slate-700 overflow-hidden">
                <div class="bg-indigo-600/20 px-4 py-3 border-b border-slate-700 flex items-center gap-2">
                    <iconify-icon icon="circle-flags:fr" width="20"></iconify-icon>
                    <span class="text-white font-medium">France (FR)</span>
                </div>
                <div class="p-4 space-y-2">
                    <a href="/fr/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Accueil</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/fr/france/simulateur-salaire-brut-net/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Brut vers Net</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/fr/france/simulateur-impot-revenu/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Impot sur le Revenu</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/fr/france/simulateur-chomage-are/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Chomage ARE</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/fr/france/simulateur-indemnite-licenciement/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Indemnite Licenciement</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/fr/france/simulateur-rupture-conventionnelle/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Rupture Conventionnelle</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/fr/france/simulateur-apl/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>APL</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/fr/france/simulateur-indemnite-kilometrique/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Frais Kilometriques</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/fr/france/guide/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Guide Fiscal</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                </div>
            </div>

            <!-- France EN -->
            <div class="bg-slate-800 rounded-xl border border-slate-700 overflow-hidden">
                <div class="bg-blue-600/20 px-4 py-3 border-b border-slate-700 flex items-center gap-2">
                    <iconify-icon icon="circle-flags:gb" width="20"></iconify-icon>
                    <span class="text-white font-medium">France (EN)</span>
                </div>
                <div class="p-4 space-y-2">
                    <a href="/en/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Home</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/en/france/gross-to-net/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Gross to Net</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/en/france/income-tax/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Income Tax</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/en/france/unemployment-calculator/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Unemployment Calculator</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/en/france/severance-calculator/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Severance Calculator</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/en/france/mutual-termination-calculator/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Mutual Termination</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/en/france/housing-benefit-calculator/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Housing Benefit (APL)</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/en/france/mileage-calculator/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Mileage Calculator</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/en/france/tax-guide/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Tax Guide</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                </div>
            </div>

            <!-- Maroc FR -->
            <div class="bg-slate-800 rounded-xl border border-slate-700 overflow-hidden">
                <div class="bg-emerald-600/20 px-4 py-3 border-b border-slate-700 flex items-center gap-2">
                    <iconify-icon icon="circle-flags:ma" width="20"></iconify-icon>
                    <span class="text-white font-medium">Maroc (FR)</span>
                </div>
                <div class="p-4 space-y-2">
                    <a href="/fr/maroc/simulateur-salaire-brut-net/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Brut vers Net</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/fr/maroc/simulateur-ir/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Simulateur IR</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/fr/maroc/guide/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Guide Fiscal</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                </div>
            </div>

            <!-- Other Pages -->
            <div class="bg-slate-800 rounded-xl border border-slate-700 overflow-hidden">
                <div class="bg-purple-600/20 px-4 py-3 border-b border-slate-700 flex items-center gap-2">
                    <iconify-icon icon="lucide:file-text" width="20" class="text-purple-400"></iconify-icon>
                    <span class="text-white font-medium">Autres Pages</span>
                </div>
                <div class="p-4 space-y-2">
                    <a href="/fr/comparateur-salaire-france-maroc/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Comparateur France/Maroc</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/fr/comparateur-global/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Comparateur Global</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/fr/faq/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>FAQ</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/fr/mentions-legales/" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Mentions Legales</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/sitemap.xml" target="_blank" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Sitemap XML</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                    <a href="/robots.txt" target="_blank" class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-700/50 text-slate-300 hover:text-white">
                        <span>Robots.txt</span>
                        <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                    </a>
                </div>
            </div>
        </div>

        <!-- SEO Tools -->
        <h2 class="text-white font-semibold mb-4 flex items-center gap-2">
            <iconify-icon icon="lucide:search" width="20" class="text-indigo-400"></iconify-icon>
            Outils SEO
        </h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            <a href="https://www.google.com/search?q=site:netsalaire.com" target="_blank" class="card bg-slate-800 rounded-xl p-4 border border-slate-700 hover:border-emerald-500 text-center">
                <iconify-icon icon="logos:google-icon" width="28" class="mb-2"></iconify-icon>
                <p class="text-white text-sm">Pages indexees</p>
            </a>
            <a href="https://search.google.com/test/rich-results?url=https://netsalaire.com" target="_blank" class="card bg-slate-800 rounded-xl p-4 border border-slate-700 hover:border-emerald-500 text-center">
                <iconify-icon icon="lucide:star" width="28" class="text-amber-400 mb-2"></iconify-icon>
                <p class="text-white text-sm">Rich Results Test</p>
            </a>
            <a href="https://search.google.com/test/mobile-friendly?url=https://netsalaire.com" target="_blank" class="card bg-slate-800 rounded-xl p-4 border border-slate-700 hover:border-emerald-500 text-center">
                <iconify-icon icon="lucide:smartphone" width="28" class="text-blue-400 mb-2"></iconify-icon>
                <p class="text-white text-sm">Mobile Test</p>
            </a>
            <a href="https://validator.w3.org/nu/?doc=https://netsalaire.com" target="_blank" class="card bg-slate-800 rounded-xl p-4 border border-slate-700 hover:border-emerald-500 text-center">
                <iconify-icon icon="lucide:code" width="28" class="text-purple-400 mb-2"></iconify-icon>
                <p class="text-white text-sm">HTML Validator</p>
            </a>
        </div>

        <!-- SEO Analyzer Section -->
        <h2 class="text-white font-semibold mb-4 flex items-center gap-2">
            <iconify-icon icon="lucide:search-check" width="20" class="text-indigo-400"></iconify-icon>
            Analyseur SEO Complet
        </h2>

        <!-- SEO Overview Stats -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
            <div class="bg-slate-800 rounded-xl p-4 border border-slate-700">
                <div class="flex items-center gap-2 mb-2">
                    <div class="w-8 h-8 bg-emerald-500/20 rounded-lg flex items-center justify-center">
                        <iconify-icon icon="lucide:check-circle" width="18" class="text-emerald-400"></iconify-icon>
                    </div>
                    <span class="text-slate-400 text-sm">Score Moyen</span>
                </div>
                <p class="text-2xl font-bold text-emerald-400" id="avgScore">--</p>
            </div>
            <div class="bg-slate-800 rounded-xl p-4 border border-slate-700">
                <div class="flex items-center gap-2 mb-2">
                    <div class="w-8 h-8 bg-emerald-500/20 rounded-lg flex items-center justify-center">
                        <iconify-icon icon="lucide:thumbs-up" width="18" class="text-emerald-400"></iconify-icon>
                    </div>
                    <span class="text-slate-400 text-sm">Pages OK</span>
                </div>
                <p class="text-2xl font-bold text-emerald-400" id="pagesOk">--</p>
            </div>
            <div class="bg-slate-800 rounded-xl p-4 border border-slate-700">
                <div class="flex items-center gap-2 mb-2">
                    <div class="w-8 h-8 bg-amber-500/20 rounded-lg flex items-center justify-center">
                        <iconify-icon icon="lucide:alert-triangle" width="18" class="text-amber-400"></iconify-icon>
                    </div>
                    <span class="text-slate-400 text-sm">A ameliorer</span>
                </div>
                <p class="text-2xl font-bold text-amber-400" id="pagesWarning">--</p>
            </div>
            <div class="bg-slate-800 rounded-xl p-4 border border-slate-700">
                <div class="flex items-center gap-2 mb-2">
                    <div class="w-8 h-8 bg-red-500/20 rounded-lg flex items-center justify-center">
                        <iconify-icon icon="lucide:x-circle" width="18" class="text-red-400"></iconify-icon>
                    </div>
                    <span class="text-slate-400 text-sm">Problemes</span>
                </div>
                <p class="text-2xl font-bold text-red-400" id="pagesError">--</p>
            </div>
        </div>

        <div class="bg-slate-800 rounded-xl border border-slate-700 overflow-hidden mb-8">
            <!-- Toolbar -->
            <div class="flex flex-wrap items-center justify-between gap-3 border-b border-slate-700 px-4 py-3 bg-slate-700/30">
                <div class="flex gap-2">
                    <button onclick="filterSEO('all')" class="seo-filter active px-3 py-1.5 text-xs font-medium rounded-lg bg-indigo-600 text-white" data-filter="all">Tous</button>
                    <button onclick="filterSEO('fr')" class="seo-filter px-3 py-1.5 text-xs font-medium rounded-lg bg-slate-600 text-slate-300 hover:bg-slate-500" data-filter="fr">FR</button>
                    <button onclick="filterSEO('en')" class="seo-filter px-3 py-1.5 text-xs font-medium rounded-lg bg-slate-600 text-slate-300 hover:bg-slate-500" data-filter="en">EN</button>
                    <span class="border-l border-slate-600 mx-2"></span>
                    <button onclick="filterByScore('good')" class="seo-score-filter px-3 py-1.5 text-xs font-medium rounded-lg bg-slate-600 text-slate-300 hover:bg-slate-500" data-score="good">
                        <span class="text-emerald-400">●</span> OK
                    </button>
                    <button onclick="filterByScore('warning')" class="seo-score-filter px-3 py-1.5 text-xs font-medium rounded-lg bg-slate-600 text-slate-300 hover:bg-slate-500" data-score="warning">
                        <span class="text-amber-400">●</span> Moyen
                    </button>
                    <button onclick="filterByScore('error')" class="seo-score-filter px-3 py-1.5 text-xs font-medium rounded-lg bg-slate-600 text-slate-300 hover:bg-slate-500" data-score="error">
                        <span class="text-red-400">●</span> Faible
                    </button>
                </div>
                <div class="flex gap-2">
                    <span id="changesCount" class="text-slate-400 text-xs hidden"><span class="text-amber-400 font-medium">0</span> modifications</span>
                    <button onclick="exportSEOChanges()" class="px-3 py-1.5 text-xs font-medium rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white flex items-center gap-1">
                        <iconify-icon icon="lucide:download" width="14"></iconify-icon>
                        Exporter
                    </button>
                </div>
            </div>

            <!-- SEO Cards -->
            <div id="seoContainer" class="p-4 space-y-6 max-h-[800px] overflow-y-auto"></div>

            <!-- Legend -->
            <div class="px-4 py-3 bg-slate-700/30 border-t border-slate-700 flex flex-wrap gap-4 text-xs">
                <span><span class="text-emerald-400">●</span> Optimal (80-100)</span>
                <span><span class="text-amber-400">●</span> Moyen (50-79)</span>
                <span><span class="text-red-400">●</span> Faible (0-49)</span>
                <span class="ml-auto text-slate-500">Title: 50-60 chars | Desc: 140-160 chars</span>
            </div>
        </div>

        <!-- Export Modal -->
        <div id="exportModal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4">
            <div class="bg-slate-800 rounded-xl border border-slate-700 max-w-2xl w-full max-h-[80vh] overflow-hidden">
                <div class="flex items-center justify-between px-4 py-3 border-b border-slate-700">
                    <h3 class="text-white font-medium">Exporter les modifications SEO</h3>
                    <button onclick="closeExportModal()" class="text-slate-400 hover:text-white">
                        <iconify-icon icon="lucide:x" width="20"></iconify-icon>
                    </button>
                </div>
                <div class="p-4">
                    <p class="text-slate-400 text-sm mb-3">Copie ce JSON et colle-le moi dans le chat. Je mettrai a jour tous les fichiers automatiquement.</p>
                    <textarea id="exportData" class="w-full h-64 bg-slate-900 border border-slate-700 rounded-lg p-3 text-slate-300 text-xs font-mono resize-none focus:outline-none focus:border-indigo-500"></textarea>
                    <div class="flex gap-2 mt-3">
                        <button onclick="copyExport()" class="flex-1 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-medium flex items-center justify-center gap-2">
                            <iconify-icon icon="lucide:copy" width="16"></iconify-icon>
                            Copier
                        </button>
                        <button onclick="closeExportModal()" class="px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg text-sm">Fermer</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Section -->
        <h2 class="text-white font-semibold mb-4 flex items-center gap-2">
            <iconify-icon icon="lucide:sticky-note" width="20" class="text-indigo-400"></iconify-icon>
            Notes & Todo
        </h2>
        <div class="bg-slate-800 rounded-xl border border-slate-700 p-4 mb-8">
            <textarea id="notes" class="w-full h-40 bg-slate-900 border border-slate-700 rounded-lg p-4 text-slate-300 text-sm resize-none focus:outline-none focus:border-indigo-500" placeholder="Ecris tes notes ici... (sauvegarde automatique en local)"></textarea>
            <p class="text-slate-500 text-xs mt-2">Les notes sont sauvegardees dans le localStorage de ton navigateur.</p>
        </div>

    </main>

    <!-- Footer -->
    <footer class="border-t border-slate-700 px-6 py-4 text-center">
        <p class="text-slate-500 text-sm">NetSalaire Admin - Page privee non indexee</p>
    </footer>

    <script>
        // Load saved notes
        const notesTextarea = document.getElementById('notes');
        const savedNotes = localStorage.getItem('netsalaire_admin_notes');
        if (savedNotes) {
            notesTextarea.value = savedNotes;
        }

        // Auto-save notes
        notesTextarea.addEventListener('input', function() {
            localStorage.setItem('netsalaire_admin_notes', this.value);
        });

        // SEO Data - All pages with current values
        const seoData = [
            { path: "/fr/", lang: "fr", title: "Simulateur Salaire Net 2025 – France & Maroc | Gratuit", desc: "Découvre ce qu'il te reste vraiment en poche. Calcul instantané brut → net, impôts et comparatif fiscal entre France et Maroc. 100% gratuit.", keywords: ["salaire net", "brut net", "simulateur", "france", "maroc", "2025", "gratuit"] },
            { path: "/fr/france/simulateur-salaire-brut-net/", lang: "fr", title: "Salaire Brut Net France 2025 → Calcul Instantané Gratuit", desc: "Cadre ou non-cadre ? Découvre ton vrai salaire net après cotisations en 2 clics. Résultat détaillé, gratuit, sans inscription.", keywords: ["salaire brut net", "france", "cadre", "non-cadre", "cotisations", "2025"] },
            { path: "/fr/france/simulateur-impot-revenu/", lang: "fr", title: "Simulateur Impôt sur le Revenu France 2025 | Calcul Précis", desc: "Combien tu vas vraiment payer ? Calcule ton IR en 30 sec. Barème officiel, quotient familial, décote et PER inclus.", keywords: ["impot revenu", "IR", "france", "bareme", "quotient familial", "2025"] },
            { path: "/fr/france/simulateur-chomage-are/", lang: "fr", title: "Simulateur Chomage ARE 2025 - Calcul Gratuit et Instantane", desc: "Licencie ou en fin de contrat ? Calculez votre ARE en 30 secondes. Simulateur gratuit avec les taux France Travail 2025. Montant journalier + duree.", keywords: ["chomage", "ARE", "allocation", "france travail", "2025"] },
            { path: "/fr/france/simulateur-indemnite-licenciement/", lang: "fr", title: "Calcul Indemnite Licenciement 2025 - Simulateur Gratuit", desc: "Vous etes licencie ? Calculez votre indemnite legale en 2 clics. Simulateur gratuit 2025 base sur salaire et anciennete. Connaissez vos droits !", keywords: ["indemnite licenciement", "calcul", "simulateur", "2025"] },
            { path: "/fr/france/simulateur-rupture-conventionnelle/", lang: "fr", title: "Simulateur Rupture Conventionnelle 2025 - Calcul Gratuit", desc: "Vous negociez votre depart ? Calculez votre indemnite de rupture conventionnelle instantanement. Minimum legal + conseils de negociation. Outil gratuit 2025.", keywords: ["rupture conventionnelle", "indemnite", "calcul", "2025"] },
            { path: "/fr/france/simulateur-apl/", lang: "fr", title: "Simulateur APL 2025 - Calcul Aide au Logement Gratuit", desc: "Vous etes locataire ? Verifiez votre eligibilite APL en 30 secondes. Simulateur gratuit 2025 avec baremes CAF officiels. Ne passez pas a cote de vos aides !", keywords: ["APL", "aide logement", "CAF", "simulateur", "2025"] },
            { path: "/fr/france/simulateur-indemnite-kilometrique/", lang: "fr", title: "Calcul Frais Kilometriques 2025 - Simulateur Gratuit IK", desc: "Vous utilisez votre vehicule pour le travail ? Calculez votre deduction fiscale instantanement. Bareme officiel 2025 + bonus 20% vehicule electrique inclus.", keywords: ["frais kilometriques", "IK", "bareme", "deduction", "2025"] },
            { path: "/fr/france/guide/", lang: "fr", title: "Guide Fiscal France 2025 – Tout Comprendre en 5 Minutes", desc: "Cotisations, tranches d'impôt, quotient familial... La fiscalité française expliquée simplement. Le guide que tu aurais aimé avoir avant.", keywords: ["guide fiscal", "france", "cotisations", "impot", "2025"] },
            { path: "/fr/maroc/simulateur-salaire-brut-net/", lang: "fr", title: "Salaire Brut Net Maroc 2025 → Simulateur CNSS & IR Gratuit", desc: "CNSS, AMO, IR... Combien il te reste vraiment ? Calcule ton salaire net au Maroc en 2 clics. Barèmes 2025 officiels.", keywords: ["salaire brut net", "maroc", "CNSS", "IR", "AMO", "2025"] },
            { path: "/fr/maroc/simulateur-ir/", lang: "fr", title: "Simulateur Impôt sur le Revenu Maroc 2025 | Calcul IR", desc: "Calcule ton IR marocain en quelques secondes. Tranches 2025, abattements familiaux, frais pro inclus. Résultat instantané et gratuit.", keywords: ["impot revenu", "IR", "maroc", "tranches", "2025"] },
            { path: "/fr/maroc/guide/", lang: "fr", title: "Guide Fiscal Maroc 2025 – CNSS, IR et Salaire Net Expliqués", desc: "CNSS, AMO, tranches IR... Comprends enfin la fiscalité marocaine. Guide clair et complet, mis à jour pour 2025.", keywords: ["guide fiscal", "maroc", "CNSS", "IR", "2025"] },
            { path: "/fr/comparateur-salaire-france-maroc/", lang: "fr", title: "France vs Maroc : Où Gagnes-tu Plus ? | Comparateur 2025", desc: "MRE : compare ton salaire net, tes impôts et cotisations entre la France et le Maroc. La réponse va peut-être te surprendre.", keywords: ["comparateur", "france", "maroc", "salaire", "MRE", "2025"] },
            { path: "/fr/comparateur-global/", lang: "fr", title: "Comparateur Salaire Net : 10+ Pays | France, Dubaï, Suisse...", desc: "France, Maroc, Dubaï, Suisse, Luxembourg... Où ton salaire vaut-il vraiment le plus ? Compare et trouve le meilleur pays pour toi.", keywords: ["comparateur", "salaire net", "international", "dubai", "suisse"] },
            { path: "/fr/faq/", lang: "fr", title: "FAQ Salaire Brut Net & Impôts – Toutes les Réponses", desc: "Brut vs net ? Cadre vs non-cadre ? Différence France/Maroc ? Toutes les réponses claires aux questions que tout le monde se pose.", keywords: ["FAQ", "brut net", "impots", "questions"] },
            { path: "/fr/mentions-legales/", lang: "fr", title: "Mentions Légales – NetSalaire.com", desc: "Mentions légales et informations juridiques du site NetSalaire.com.", keywords: ["mentions legales"] },
            { path: "/fr/politique-confidentialite/", lang: "fr", title: "Politique de Confidentialité – NetSalaire.com", desc: "Comment NetSalaire.com protège tes données. Spoiler : on ne stocke rien, tout est calculé dans ton navigateur.", keywords: ["confidentialite", "donnees", "RGPD"] },
            { path: "/en/", lang: "en", title: "Net Salary Calculator 2025 – France & Morocco | Free", desc: "Find out what you really take home. Instant gross → net calculation, taxes and France vs Morocco comparison. 100% free, no signup.", keywords: ["net salary", "calculator", "france", "morocco", "2025", "free"] },
            { path: "/en/france/gross-to-net/", lang: "en", title: "Gross to Net Salary France 2025 → Free Instant Calculator", desc: "Convert your French gross salary to net in seconds. Includes social charges, income tax and employer cost breakdown.", keywords: ["gross to net", "france", "salary", "calculator", "2025"] },
            { path: "/en/france/income-tax/", lang: "en", title: "France Income Tax Calculator 2025 | Accurate & Free", desc: "Estimate your French income tax instantly. Based on official 2025 brackets. Single, married, with dependents – all cases covered.", keywords: ["income tax", "france", "calculator", "2025"] },
            { path: "/en/france/unemployment-calculator/", lang: "en", title: "Unemployment Calculator France 2025 - Free ARE Estimate", desc: "Calculate your French unemployment benefits (ARE) instantly. Free tool with 2025 France Travail rates. Know your daily allowance & duration in 30 seconds.", keywords: ["unemployment", "ARE", "france", "calculator", "2025"] },
            { path: "/en/france/severance-calculator/", lang: "en", title: "Severance Pay Calculator France 2025 - Free & Instant", desc: "Getting fired in France? Calculate your legal severance pay in 2 clicks. Free 2025 calculator based on salary & seniority. Know your rights instantly.", keywords: ["severance", "calculator", "france", "2025"] },
            { path: "/en/france/mutual-termination-calculator/", lang: "en", title: "Rupture Conventionnelle Calculator France 2025 - Free Tool", desc: "Negotiating your departure? Calculate your rupture conventionnelle compensation instantly. Free 2025 tool with legal minimum, timeline & negotiation tips.", keywords: ["rupture conventionnelle", "calculator", "france", "2025"] },
            { path: "/en/france/housing-benefit-calculator/", lang: "en", title: "APL Calculator France 2025 - Free Housing Benefit Estimate", desc: "Renting in France? Check if you qualify for APL housing aid in 30 seconds. Free 2025 calculator based on zone, rent & income. Don't miss out on benefits!", keywords: ["APL", "housing benefit", "france", "calculator", "2025"] },
            { path: "/en/france/mileage-calculator/", lang: "en", title: "Mileage Calculator France 2025 - Free Tax Deduction Tool", desc: "Drive for work? Calculate your French mileage deduction instantly. Free 2025 tool with official rates. Car, motorcycle, e-bike. +20% EV bonus included.", keywords: ["mileage", "calculator", "france", "deduction", "2025"] },
            { path: "/en/france/tax-guide/", lang: "en", title: "French Tax System 2025 – Explained in 5 Minutes", desc: "Understand French social charges, income tax brackets and net salary calculation. Clear guide for employees & expats.", keywords: ["tax guide", "france", "social charges", "2025"] },
            { path: "/en/morocco/gross-to-net/", lang: "en", title: "Gross to Net Salary Morocco 2025 → CNSS & IR Calculator", desc: "Calculate your Moroccan net salary in seconds. CNSS contributions, IR tax and AMO included. 100% free.", keywords: ["gross to net", "morocco", "CNSS", "calculator", "2025"] },
            { path: "/en/morocco/tax-simulator/", lang: "en", title: "Morocco Income Tax Simulator 2025 | IR Calculation", desc: "Estimate your Moroccan IR (Impôt sur le Revenu) instantly. Updated 2025 brackets, deductions included.", keywords: ["income tax", "morocco", "IR", "calculator", "2025"] },
            { path: "/en/morocco/tax-guide/", lang: "en", title: "Moroccan Tax System 2025 – CNSS, IR & Net Salary Guide", desc: "Everything about taxes in Morocco: CNSS, AMO, IR brackets and how to calculate your net salary. Simple guide.", keywords: ["tax guide", "morocco", "CNSS", "IR", "2025"] },
            { path: "/en/france-morocco-comparison/", lang: "en", title: "France vs Morocco: Where Do You Earn More? | 2025 Comparator", desc: "Compare your net salary, taxes and purchasing power between France and Morocco. Make informed career decisions.", keywords: ["comparison", "france", "morocco", "salary", "2025"] },
            { path: "/en/global-comparison/", lang: "en", title: "Net Salary Comparator: 10+ Countries | France, Dubai, Switzerland...", desc: "Compare net salaries across France, Morocco, Switzerland, UAE, Belgium and more. See where your money goes further.", keywords: ["comparator", "salary", "international", "dubai", "switzerland"] },
            { path: "/en/faq/", lang: "en", title: "FAQ Gross to Net & Taxes – All Your Questions Answered", desc: "How is net salary calculated? What taxes apply? Find clear answers to all your gross-to-net and tax questions.", keywords: ["FAQ", "gross to net", "taxes", "questions"] },
            { path: "/en/legal-notice/", lang: "en", title: "Legal Notice – NetSalaire.com", desc: "Legal information about NetSalaire.com. Publisher, hosting and terms of use.", keywords: ["legal notice"] },
            { path: "/en/privacy-policy/", lang: "en", title: "Privacy Policy – NetSalaire.com", desc: "How NetSalaire.com protects your data. Spoiler: we store nothing, everything is calculated in your browser.", keywords: ["privacy", "data", "GDPR"] }
        ];

        // Track changes
        let seoChanges = JSON.parse(localStorage.getItem('seoChanges') || '{}');
        let currentScoreFilter = null;

        // Calculate SEO score for a page
        function calculateSEOScore(title, desc, keywords) {
            let score = 0;
            let checks = [];

            // Title checks (max 35 points)
            const titleLen = title.length;
            if (titleLen >= 50 && titleLen <= 60) {
                score += 15;
                checks.push({ text: 'Longueur title optimale (50-60)', status: 'good' });
            } else if (titleLen >= 40 && titleLen <= 70) {
                score += 8;
                checks.push({ text: `Longueur title acceptable (${titleLen} chars)`, status: 'warning' });
            } else {
                checks.push({ text: `Longueur title ${titleLen < 40 ? 'trop courte' : 'trop longue'} (${titleLen} chars)`, status: 'error' });
            }

            if (/\d{4}/.test(title)) {
                score += 10;
                checks.push({ text: 'Annee presente dans le title', status: 'good' });
            } else {
                checks.push({ text: 'Ajouter l\'annee (ex: 2025) dans le title', status: 'warning' });
            }

            if (/[|–\-:]/.test(title)) {
                score += 5;
                checks.push({ text: 'Separateur present dans le title', status: 'good' });
            }

            const titleKeywords = keywords.filter(k => title.toLowerCase().includes(k.toLowerCase()));
            if (titleKeywords.length >= 2) {
                score += 5;
                checks.push({ text: `${titleKeywords.length} mots-cles dans le title`, status: 'good' });
            } else if (titleKeywords.length === 1) {
                score += 2;
                checks.push({ text: 'Ajouter plus de mots-cles dans le title', status: 'warning' });
            } else {
                checks.push({ text: 'Aucun mot-cle dans le title', status: 'error' });
            }

            // Description checks (max 35 points)
            const descLen = desc.length;
            if (descLen >= 140 && descLen <= 160) {
                score += 15;
                checks.push({ text: 'Longueur description optimale (140-160)', status: 'good' });
            } else if (descLen >= 120 && descLen <= 180) {
                score += 8;
                checks.push({ text: `Longueur description acceptable (${descLen} chars)`, status: 'warning' });
            } else {
                checks.push({ text: `Longueur description ${descLen < 120 ? 'trop courte' : 'trop longue'} (${descLen} chars)`, status: 'error' });
            }

            const descKeywords = keywords.filter(k => desc.toLowerCase().includes(k.toLowerCase()));
            if (descKeywords.length >= 3) {
                score += 10;
                checks.push({ text: `${descKeywords.length} mots-cles dans la description`, status: 'good' });
            } else if (descKeywords.length >= 1) {
                score += 5;
                checks.push({ text: 'Ajouter plus de mots-cles dans la description', status: 'warning' });
            } else {
                checks.push({ text: 'Aucun mot-cle dans la description', status: 'error' });
            }

            // CTA / Action words
            const ctaWords = ['calcul', 'simulat', 'gratuit', 'free', 'instant', 'découvr', 'compare', 'estim', 'find', 'get', 'check'];
            if (ctaWords.some(w => desc.toLowerCase().includes(w))) {
                score += 10;
                checks.push({ text: 'Call-to-action present', status: 'good' });
            } else {
                checks.push({ text: 'Ajouter un call-to-action (ex: Calculez, Decouvrez...)', status: 'warning' });
            }

            // Unique value proposition
            const uniqueWords = ['unique', 'officiel', 'precis', 'fiable', 'accurate', 'official', '100%', 'vraiment'];
            if (uniqueWords.some(w => desc.toLowerCase().includes(w))) {
                score += 5;
                checks.push({ text: 'Proposition de valeur presente', status: 'good' });
            }

            // Emotional/power words
            const powerWords = ['secret', 'surprise', 'vraiment', 'really', 'actually', 'best', 'top', 'meilleur'];
            if (powerWords.some(w => (title + desc).toLowerCase().includes(w))) {
                score += 5;
                checks.push({ text: 'Mots puissants utilises', status: 'good' });
            }

            // Numbers in description
            if (/\d+/.test(desc)) {
                score += 5;
                checks.push({ text: 'Chiffres presents dans la description', status: 'good' });
            } else {
                checks.push({ text: 'Ajouter des chiffres (ex: "en 30 secondes", "100%")', status: 'warning' });
            }

            return { score: Math.min(score, 100), checks };
        }

        // Get score color and status
        function getScoreColor(score) {
            if (score >= 80) return { color: 'emerald', status: 'good', label: 'Excellent' };
            if (score >= 50) return { color: 'amber', status: 'warning', label: 'Moyen' };
            return { color: 'red', status: 'error', label: 'A ameliorer' };
        }

        // Get char count color
        function getCountColor(len, min, max) {
            if (len >= min && len <= max) return 'text-emerald-400';
            if (len > max) return 'text-amber-400';
            return 'text-red-400';
        }

        // Update overview stats
        function updateOverviewStats() {
            let totalScore = 0;
            let pagesOk = 0;
            let pagesWarning = 0;
            let pagesError = 0;

            seoData.forEach(item => {
                const savedTitle = seoChanges[item.path]?.title || item.title;
                const savedDesc = seoChanges[item.path]?.desc || item.desc;
                const { score } = calculateSEOScore(savedTitle, savedDesc, item.keywords || []);
                totalScore += score;

                const { status } = getScoreColor(score);
                if (status === 'good') pagesOk++;
                else if (status === 'warning') pagesWarning++;
                else pagesError++;
            });

            document.getElementById('avgScore').textContent = Math.round(totalScore / seoData.length) + '/100';
            document.getElementById('pagesOk').textContent = pagesOk;
            document.getElementById('pagesWarning').textContent = pagesWarning;
            document.getElementById('pagesError').textContent = pagesError;
        }

        // Render SEO cards
        function renderSEOCards() {
            const container = document.getElementById('seoContainer');
            container.innerHTML = '';

            seoData.forEach((item, index) => {
                const savedTitle = seoChanges[item.path]?.title || item.title;
                const savedDesc = seoChanges[item.path]?.desc || item.desc;
                const hasChanges = seoChanges[item.path] !== undefined;
                const { score, checks } = calculateSEOScore(savedTitle, savedDesc, item.keywords || []);
                const { color, status, label } = getScoreColor(score);

                const card = document.createElement('div');
                card.className = `seo-card ${item.lang} ${status} bg-slate-700/30 rounded-xl p-5 border-2 ${hasChanges ? 'border-amber-500/50' : `border-${color}-500/30`}`;
                card.dataset.score = status;

                // Generate SERP preview
                const serpTitle = savedTitle.length > 60 ? savedTitle.substring(0, 57) + '...' : savedTitle;
                const serpDesc = savedDesc.length > 160 ? savedDesc.substring(0, 157) + '...' : savedDesc;
                const serpUrl = 'netsalaire.com' + item.path;

                card.innerHTML = `
                    <!-- Header with Score -->
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 rounded-xl bg-${color}-500/20 flex items-center justify-center">
                                <span class="text-${color}-400 font-bold text-lg">${score}</span>
                            </div>
                            <div>
                                <a href="${item.path}" target="_blank" class="text-white hover:text-indigo-400 font-medium flex items-center gap-1">
                                    ${item.path}
                                    <iconify-icon icon="lucide:external-link" width="14" class="text-slate-500"></iconify-icon>
                                </a>
                                <span class="text-xs text-${color}-400">${label}</span>
                            </div>
                        </div>
                        <span class="text-xs px-2 py-1 rounded-lg ${item.lang === 'fr' ? 'bg-indigo-600/30 text-indigo-300' : 'bg-blue-600/30 text-blue-300'}">${item.lang.toUpperCase()}</span>
                    </div>

                    <!-- SERP Preview -->
                    <div class="bg-white rounded-lg p-4 mb-4">
                        <div class="text-xs text-green-700 mb-1">${serpUrl}</div>
                        <div class="text-blue-800 text-lg hover:underline cursor-pointer mb-1 font-medium" style="font-family: arial, sans-serif;">${serpTitle}</div>
                        <div class="text-sm text-gray-600" style="font-family: arial, sans-serif;">${serpDesc}</div>
                    </div>

                    <!-- Editor -->
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="text-slate-400 text-xs flex items-center justify-between mb-2">
                                <span class="flex items-center gap-1">
                                    <iconify-icon icon="lucide:type" width="12"></iconify-icon>
                                    Title
                                </span>
                                <span class="${getCountColor(savedTitle.length, 50, 60)}" id="titleCount-${index}">${savedTitle.length}/60</span>
                            </label>
                            <input type="text"
                                   value="${savedTitle.replace(/"/g, '&quot;')}"
                                   data-path="${item.path}"
                                   data-field="title"
                                   data-original="${item.title.replace(/"/g, '&quot;')}"
                                   data-index="${index}"
                                   class="w-full bg-slate-900 border border-slate-600 rounded-lg px-3 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500"
                                   oninput="updateSEO(this)">
                            <div class="mt-1 h-1.5 bg-slate-700 rounded-full overflow-hidden">
                                <div class="h-full ${savedTitle.length >= 50 && savedTitle.length <= 60 ? 'bg-emerald-500' : savedTitle.length > 60 ? 'bg-amber-500' : 'bg-red-500'}" style="width: ${Math.min(savedTitle.length / 60 * 100, 100)}%"></div>
                            </div>
                        </div>
                        <div>
                            <label class="text-slate-400 text-xs flex items-center justify-between mb-2">
                                <span class="flex items-center gap-1">
                                    <iconify-icon icon="lucide:text" width="12"></iconify-icon>
                                    Meta Description
                                </span>
                                <span class="${getCountColor(savedDesc.length, 140, 160)}" id="descCount-${index}">${savedDesc.length}/160</span>
                            </label>
                            <textarea data-path="${item.path}"
                                      data-field="desc"
                                      data-original="${item.desc.replace(/"/g, '&quot;')}"
                                      data-index="${index}"
                                      class="w-full bg-slate-900 border border-slate-600 rounded-lg px-3 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500 resize-none h-20"
                                      oninput="updateSEO(this)">${savedDesc}</textarea>
                            <div class="mt-1 h-1.5 bg-slate-700 rounded-full overflow-hidden">
                                <div class="h-full ${savedDesc.length >= 140 && savedDesc.length <= 160 ? 'bg-emerald-500' : savedDesc.length > 160 ? 'bg-amber-500' : 'bg-red-500'}" style="width: ${Math.min(savedDesc.length / 160 * 100, 100)}%"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Keywords -->
                    <div class="mb-4">
                        <label class="text-slate-400 text-xs flex items-center gap-1 mb-2">
                            <iconify-icon icon="lucide:tag" width="12"></iconify-icon>
                            Mots-cles cibles
                        </label>
                        <div class="flex flex-wrap gap-2">
                            ${(item.keywords || []).map(kw => {
                                const inTitle = savedTitle.toLowerCase().includes(kw.toLowerCase());
                                const inDesc = savedDesc.toLowerCase().includes(kw.toLowerCase());
                                const status = inTitle && inDesc ? 'emerald' : (inTitle || inDesc) ? 'amber' : 'red';
                                return `<span class="px-2 py-1 text-xs rounded-lg bg-${status}-500/20 text-${status}-400 border border-${status}-500/30">${kw}</span>`;
                            }).join('')}
                        </div>
                    </div>

                    <!-- SEO Checklist -->
                    <details class="group">
                        <summary class="flex items-center gap-2 cursor-pointer text-slate-400 text-sm hover:text-white">
                            <iconify-icon icon="lucide:list-checks" width="16"></iconify-icon>
                            Checklist SEO (${checks.filter(c => c.status === 'good').length}/${checks.length} criteres)
                            <iconify-icon icon="lucide:chevron-down" width="16" class="ml-auto group-open:rotate-180 transition-transform"></iconify-icon>
                        </summary>
                        <div class="mt-3 space-y-2 pl-2 border-l-2 border-slate-600">
                            ${checks.map(check => `
                                <div class="flex items-start gap-2 text-xs">
                                    <iconify-icon icon="${check.status === 'good' ? 'lucide:check-circle' : check.status === 'warning' ? 'lucide:alert-circle' : 'lucide:x-circle'}"
                                                  width="14"
                                                  class="mt-0.5 ${check.status === 'good' ? 'text-emerald-400' : check.status === 'warning' ? 'text-amber-400' : 'text-red-400'}"></iconify-icon>
                                    <span class="${check.status === 'good' ? 'text-slate-400' : 'text-slate-300'}">${check.text}</span>
                                </div>
                            `).join('')}
                        </div>
                    </details>

                    ${hasChanges ? `
                        <div class="mt-4 pt-4 border-t border-slate-600 flex justify-between items-center">
                            <span class="text-amber-400 text-xs flex items-center gap-1">
                                <iconify-icon icon="lucide:edit-3" width="12"></iconify-icon>
                                Modifie (non sauvegarde)
                            </span>
                            <button onclick="resetSEO('${item.path}')" class="text-xs text-slate-400 hover:text-red-400 flex items-center gap-1">
                                <iconify-icon icon="lucide:undo" width="12"></iconify-icon>
                                Reset
                            </button>
                        </div>
                    ` : ''}
                `;
                container.appendChild(card);
            });

            updateChangesCount();
            updateOverviewStats();
        }

        // Update SEO value
        function updateSEO(input) {
            const path = input.dataset.path;
            const field = input.dataset.field;
            const original = input.dataset.original;
            const index = input.dataset.index;
            const value = input.value;

            // Update counter
            const counterId = field === 'title' ? `titleCount-${index}` : `descCount-${index}`;
            const min = field === 'title' ? 50 : 140;
            const max = field === 'title' ? 60 : 160;
            const counter = document.getElementById(counterId);
            counter.textContent = `${value.length}/${max}`;
            counter.className = getCountColor(value.length, min, max);

            // Track changes
            if (value !== original) {
                if (!seoChanges[path]) seoChanges[path] = {};
                seoChanges[path][field] = value;
            } else if (seoChanges[path]) {
                delete seoChanges[path][field];
                if (Object.keys(seoChanges[path]).length === 0) {
                    delete seoChanges[path];
                }
            }

            localStorage.setItem('seoChanges', JSON.stringify(seoChanges));

            // Re-render to update scores and previews
            renderSEOCards();

            // Re-apply filters if active
            const activeFilter = document.querySelector('.seo-filter.bg-indigo-600');
            if (activeFilter && activeFilter.dataset.filter !== 'all') {
                filterSEO(activeFilter.dataset.filter);
            }
            if (currentScoreFilter) {
                filterByScore(currentScoreFilter);
            }
        }

        // Reset single page
        function resetSEO(path) {
            delete seoChanges[path];
            localStorage.setItem('seoChanges', JSON.stringify(seoChanges));
            renderSEOCards();
        }

        // Update changes count
        function updateChangesCount() {
            const count = Object.keys(seoChanges).length;
            const countEl = document.getElementById('changesCount');
            if (count > 0) {
                countEl.classList.remove('hidden');
                countEl.innerHTML = `<span class="text-amber-400 font-medium">${count}</span> modification${count > 1 ? 's' : ''}`;
            } else {
                countEl.classList.add('hidden');
            }
        }

        // Filter SEO cards by language
        function filterSEO(filter) {
            document.querySelectorAll('.seo-filter').forEach(btn => {
                btn.classList.remove('bg-indigo-600', 'text-white');
                btn.classList.add('bg-slate-600', 'text-slate-300');
            });
            document.querySelector(`[data-filter="${filter}"]`).classList.remove('bg-slate-600', 'text-slate-300');
            document.querySelector(`[data-filter="${filter}"]`).classList.add('bg-indigo-600', 'text-white');

            // Reset score filter
            currentScoreFilter = null;
            document.querySelectorAll('.seo-score-filter').forEach(btn => {
                btn.classList.remove('bg-indigo-600', 'text-white');
                btn.classList.add('bg-slate-600', 'text-slate-300');
            });

            document.querySelectorAll('.seo-card').forEach(card => {
                if (filter === 'all' || card.classList.contains(filter)) {
                    card.style.display = '';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Filter by score
        function filterByScore(scoreStatus) {
            currentScoreFilter = scoreStatus;

            document.querySelectorAll('.seo-score-filter').forEach(btn => {
                btn.classList.remove('bg-indigo-600', 'text-white');
                btn.classList.add('bg-slate-600', 'text-slate-300');
            });
            document.querySelector(`[data-score="${scoreStatus}"]`).classList.remove('bg-slate-600', 'text-slate-300');
            document.querySelector(`[data-score="${scoreStatus}"]`).classList.add('bg-indigo-600', 'text-white');

            // Reset language filter
            document.querySelectorAll('.seo-filter').forEach(btn => {
                btn.classList.remove('bg-indigo-600', 'text-white');
                btn.classList.add('bg-slate-600', 'text-slate-300');
            });
            document.querySelector('[data-filter="all"]').classList.remove('bg-slate-600', 'text-slate-300');
            document.querySelector('[data-filter="all"]').classList.add('bg-indigo-600', 'text-white');

            document.querySelectorAll('.seo-card').forEach(card => {
                if (card.dataset.score === scoreStatus) {
                    card.style.display = '';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Export changes
        function exportSEOChanges() {
            if (Object.keys(seoChanges).length === 0) {
                alert('Aucune modification a exporter.');
                return;
            }
            document.getElementById('exportData').value = JSON.stringify(seoChanges, null, 2);
            document.getElementById('exportModal').classList.remove('hidden');
            document.getElementById('exportModal').classList.add('flex');
        }

        function closeExportModal() {
            document.getElementById('exportModal').classList.add('hidden');
            document.getElementById('exportModal').classList.remove('flex');
        }

        function copyExport() {
            const textarea = document.getElementById('exportData');
            textarea.select();
            document.execCommand('copy');
            alert('Copie ! Colle-le dans le chat.');
        }

        // Initialize
        renderSEOCards();
    </script>
</body>
</html>
