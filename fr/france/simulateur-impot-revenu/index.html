<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Google Analytics (chargÃ© aprÃ¨s interaction pour performance) -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}

        function loadGA() {
            if (window.gaLoaded) return;
            window.gaLoaded = true;

            var script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-Z328SB8DZ8';
            script.async = true;
            document.head.appendChild(script);

            gtag('js', new Date());
            gtag('config', 'G-Z328SB8DZ8');
        }

        // Charger GA aprÃ¨s interaction utilisateur ou aprÃ¨s 3s
        ['scroll', 'click', 'touchstart', 'keydown'].forEach(function(evt) {
            window.addEventListener(evt, loadGA, {once: true, passive: true});
        });
        setTimeout(loadGA, 3000);
    </script>

    <!-- Language Router (must be early for redirect) -->
    <script defer src="/assets/js/lang-router.js"></script>

    <script>
    </script>

    <!-- SEO Primary -->
    <title>Simulateur ImpÃ´t sur le Revenu 2026 | Rapide et PrÃ©cis</title>
    <meta name="description" content="Calculez votre impÃ´t sur le revenu et les rÃ©ductions possibles : PER, crÃ¨che, dons, emploi Ã  domicile, frais de scolaritÃ©. Simulation gratuite.">
    <meta name="keywords" content="simulateur impot, impot revenu 2026, calcul IR france, bareme impot, quotient familial, PER, simulation fiscale">

    <!-- Canonical & Hreflang -->
    <link rel="canonical" href="https://netsalaire.com/fr/france/simulateur-impot-revenu/">
    <link rel="alternate" hreflang="fr" href="https://netsalaire.com/fr/france/simulateur-impot-revenu/">
    <link rel="alternate" hreflang="en" href="https://netsalaire.com/en/france/income-tax/">
    <link rel="alternate" hreflang="x-default" href="https://netsalaire.com/fr/france/simulateur-impot-revenu/">

    <!-- Open Graph -->
    <meta property="og:title" content="Simulateur Impot sur le Revenu 2026 â€” Calcul IR France | NetSalaire">
    <meta property="og:description" content="Calculez votre impot sur le revenu 2026 gratuitement. Quotient familial, tranches IR, simulation PER et dons.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://netsalaire.com/fr/france/simulateur-impot-revenu/">
    <meta property="og:image" content="https://netsalaire.com/assets/images/og-france-ir.png">
    <meta property="og:site_name" content="NetSalaire">
    <meta property="og:locale" content="fr_FR">
    <meta property="og:locale:alternate" content="en_US">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Simulateur Impot sur le Revenu 2026 â€” Calcul IR France">
    <meta name="twitter:description" content="Calculez votre impot sur le revenu 2026. Quotient familial, tranches IR, simulation PER.">
    <meta name="twitter:image" content="https://netsalaire.com/assets/images/og-france-ir.png">

    <!-- Additional SEO -->
    <meta name="robots" content="index, follow">
    <meta name="author" content="NetSalaire">

    <!-- Schema.org -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Simulateur Impot sur le Revenu France 2026",
        "description": "Calculez votre impot sur le revenu en France avec quotient familial, tranches IR et simulation PER. Bareme 2026 officiel.",
        "url": "https://netsalaire.com/fr/france/simulateur-impot-revenu/",
        "inLanguage": "fr",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Web",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "EUR"
        },
        "publisher": {
            "@type": "Organization",
            "name": "NetSalaire",
            "url": "https://netsalaire.com"
        }
    }
    </script>

    <link rel="icon" type="image/png" sizes="48x48" href="/assets/images/favicon-48.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/images/favicon-192.png">
    <link rel="apple-touch-icon" href="/assets/images/favicon-192.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <link href="/assets/css/tailwind.min.css" rel="stylesheet">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Iconify for flags -->
    <script src="https://code.iconify.design/3/3.1.0/iconify.min.js"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js" defer></script>

    <!-- Navigation CSS -->
    <link rel="stylesheet" href="/assets/css/style.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] },
                    colors: {
                        brand: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            900: '#0c4a6e',
                        },
                        emerald: {
                            50: '#ecfdf5',
                            100: '#d1fae5',
                            500: '#10b981',
                            600: '#059669',
                            700: '#047857',
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Range slider */
        input[type=range] { -webkit-appearance: none; background: transparent; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px; width: 20px;
            border-radius: 50%;
            background: #ffffff;
            border: 2px solid #0ea5e9;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.15);
            margin-top: -8px;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 4px;
            cursor: pointer;
            background: linear-gradient(to right, #0ea5e9 0%, #0ea5e9 var(--progress, 0%), #e2e8f0 var(--progress, 0%), #e2e8f0 100%);
            border-radius: 9999px;
        }

        /* Animations */
        .animate-in { animation: fadeSlideIn 0.3s ease-out; }
        @keyframes fadeSlideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .chart-transition { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }

        /* Hide number spinners */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }

        /* Tooltip */
        .tooltip { position: relative; }
        .tooltip:hover::after {
            content: attr(data-tip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #1e293b;
            color: white;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 50;
            margin-bottom: 6px;
        }

        /* Mobile sticky */
        @media (max-width: 1023px) {
            .mobile-sticky-btn {
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                z-index: 40;
            }
        }

        /* Hide details marker */
        details summary { list-style: none; }
        details summary::-webkit-details-marker { display: none; }

        /* Custom slider thumb styling */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            background: #e2e8f0;
            border-radius: 8px;
            height: 8px;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-600 antialiased selection:bg-indigo-100">
    <!-- Navbar -->
    <nav class="fixed top-0 w-full z-50 border-b border-slate-200 bg-white/80 backdrop-blur-md">
        <div class="max-w-6xl mx-auto px-6 h-16 flex items-center justify-between">
            <a href="/fr/" class="flex items-center gap-2 group">
                <div class="w-8 h-8 bg-slate-900 rounded flex items-center justify-center text-white font-semibold tracking-tighter shadow-md group-hover:bg-indigo-600 transition-colors duration-300">
                    N.
                </div>
                <span class="font-semibold tracking-tight text-slate-900">NetSalaire</span>
            </a>
            <!-- Desktop Menu -->
            <div class="hidden md:flex items-center gap-8 text-sm font-medium text-slate-600">
                <!-- France Dropdown -->
                <div class="relative group">
                    <a href="/fr/#france" class="hover:text-slate-900 transition-colors flex items-center gap-1.5 py-2">
                        <iconify-icon icon="circle-flags:fr" width="16"></iconify-icon> France
                        <iconify-icon icon="lucide:chevron-down" width="14" class="text-slate-400 group-hover:text-slate-600 transition-transform group-hover:rotate-180"></iconify-icon>
                    </a>
                    <div class="absolute top-full left-0 pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                        <div class="bg-white border border-slate-200 rounded-lg shadow-lg py-2 min-w-[220px]">
                            <a href="/fr/france/simulateur-impot-revenu/" class="flex items-center gap-3 px-4 py-2.5 text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors">
                                <iconify-icon icon="lucide:landmark" width="18" class="text-indigo-500"></iconify-icon>
                                Simulateur ImpÃ´t
                            </a>
                            <a href="/fr/france/simulateur-salaire-brut-net/" class="flex items-center gap-3 px-4 py-2.5 text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors">
                                <iconify-icon icon="lucide:calculator" width="18" class="text-indigo-500"></iconify-icon>
                                Brut vers Net
                            </a>
                            <a href="/fr/france/guide/" class="flex items-center gap-3 px-4 py-2.5 text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors">
                                <iconify-icon icon="lucide:book-open" width="18" class="text-indigo-500"></iconify-icon>
                                Guide Fiscal
                            </a>
                            <div class="border-t border-slate-100 my-2"></div>
                            <a href="/fr/france/simulateur-chomage-are/" class="flex items-center gap-3 px-4 py-2 text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors text-sm">
                                <span class="w-[18px] text-center">ğŸ“‰</span>
                                ChÃ´mage ARE
                            </a>
                            <a href="/fr/france/simulateur-indemnite-licenciement/" class="flex items-center gap-3 px-4 py-2 text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors text-sm">
                                <span class="w-[18px] text-center">ğŸ“‹</span>
                                Licenciement
                            </a>
                            <a href="/fr/france/simulateur-rupture-conventionnelle/" class="flex items-center gap-3 px-4 py-2 text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors text-sm">
                                <span class="w-[18px] text-center">ğŸ¤</span>
                                Rupture Conv.
                            </a>
                            <a href="/fr/france/simulateur-apl/" class="flex items-center gap-3 px-4 py-2 text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors text-sm">
                                <span class="w-[18px] text-center">ğŸ </span>
                                APL
                            </a>
                            <a href="/fr/france/creche-tarifs/" class="flex items-center gap-3 px-4 py-2 text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors text-sm">
                                <span class="w-[18px] text-center">ğŸ‘¶</span>
                                CrÃ¨che
                            </a>
                            <a href="/fr/france/simulateur-indemnite-kilometrique/" class="flex items-center gap-3 px-4 py-2 text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors text-sm">
                                <span class="w-[18px] text-center">ğŸš—</span>
                                Frais Km
                            </a>
                            <div class="border-t border-slate-100 my-2"></div>
                            <a href="/fr/comparateur-salaire-france-maroc/" class="flex items-center gap-3 px-4 py-2 text-indigo-600 hover:bg-indigo-50 hover:text-indigo-700 transition-colors text-sm font-medium">
                                <span class="w-[18px] text-center">ğŸ”€</span>
                                Comparer France vs Maroc
                            </a>
                        </div>
                    </div>
                </div>
                <!-- Maroc Dropdown -->
                <div class="relative group">
                    <a href="/fr/#maroc" class="hover:text-slate-900 transition-colors flex items-center gap-1.5 py-2">
                        <iconify-icon icon="circle-flags:ma" width="16"></iconify-icon> Maroc
                        <iconify-icon icon="lucide:chevron-down" width="14" class="text-slate-400 group-hover:text-slate-600 transition-transform group-hover:rotate-180"></iconify-icon>
                    </a>
                    <div class="absolute top-full left-0 pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                        <div class="bg-white border border-slate-200 rounded-lg shadow-lg py-2 min-w-[220px]">
                            <a href="/fr/maroc/simulateur-impot-revenu/" class="flex items-center gap-3 px-4 py-2.5 text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors">
                                <iconify-icon icon="lucide:landmark" width="18" class="text-emerald-500"></iconify-icon>
                                Simulateur ImpÃ´t
                            </a>
                            <a href="/fr/maroc/simulateur-salaire-brut-net/" class="flex items-center gap-3 px-4 py-2.5 text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors">
                                <iconify-icon icon="lucide:calculator" width="18" class="text-emerald-500"></iconify-icon>
                                Brut vers Net
                            </a>
                            <a href="/fr/maroc/guide/" class="flex items-center gap-3 px-4 py-2.5 text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors">
                                <iconify-icon icon="lucide:book-open" width="18" class="text-emerald-500"></iconify-icon>
                                Guide Fiscal
                            </a>
                            <div class="border-t border-slate-100 my-2"></div>
                            <a href="/fr/comparateur-salaire-france-maroc/" class="flex items-center gap-3 px-4 py-2 text-emerald-600 hover:bg-emerald-50 hover:text-emerald-700 transition-colors text-sm font-medium">
                                <span class="w-[18px] text-center">ğŸ”€</span>
                                Comparer France vs Maroc
                            </a>
                        </div>
                    </div>
                </div>
                <!-- Mega-menu Tous les pays -->
                <div class="relative group">
                    <button class="hover:text-slate-900 transition-colors flex items-center gap-1.5 py-2 text-sm font-medium text-slate-600">
                        <iconify-icon icon="lucide:globe" width="16"></iconify-icon> Tous les pays
                        <iconify-icon icon="lucide:chevron-down" width="14" class="text-slate-400 group-hover:text-slate-600 transition-transform group-hover:rotate-180"></iconify-icon>
                    </button>
                    <div class="absolute top-full right-0 pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                        <div class="bg-white border border-slate-200 rounded-xl shadow-xl py-5 px-6 min-w-[340px]" style="max-height: 75vh; overflow-y: auto;">
                            <div class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">Europe</div>
                            <div class="grid grid-cols-2 gap-x-6 gap-y-1 mb-4">
                                <a href="/fr/france/simulateur-impot-revenu/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡«ğŸ‡·</span> France</a>
                                <a href="/fr/espagne/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡ªğŸ‡¸</span> Espagne</a>
                                <a href="/fr/royaume-uni/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¬ğŸ‡§</span> Royaume-Uni</a>
                                <a href="/fr/allemagne/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡©ğŸ‡ª</span> Allemagne</a>
                                <a href="/fr/italie/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡®ğŸ‡¹</span> Italie</a>
                                <a href="/fr/pays-bas/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡³ğŸ‡±</span> Pays-Bas</a>
                                <a href="/fr/suisse/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¨ğŸ‡­</span> Suisse</a>
                                <a href="/fr/portugal/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡µğŸ‡¹</span> Portugal</a>
                                <a href="/fr/belgique/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡§ğŸ‡ª</span> Belgique</a>
                                <a href="/fr/luxembourg/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡±ğŸ‡º</span> Luxembourg</a>
                                <a href="/fr/autriche/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¦ğŸ‡¹</span> Autriche</a>
                                <a href="/fr/irlande/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡®ğŸ‡ª</span> Irlande</a>
                                <a href="/fr/suede/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¸ğŸ‡ª</span> SuÃ¨de</a>
                                <a href="/fr/norvege/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡³ğŸ‡´</span> NorvÃ¨ge</a>
                                <a href="/fr/danemark/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡©ğŸ‡°</span> Danemark</a>
                                <a href="/fr/finlande/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡«ğŸ‡®</span> Finlande</a>
                                <a href="/fr/grece/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¬ğŸ‡·</span> GrÃ¨ce</a>
                                <a href="/fr/pologne/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡µğŸ‡±</span> Pologne</a>
                                <a href="/fr/tchequie/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¨ğŸ‡¿</span> TchÃ©quie</a>
                                <a href="/fr/hongrie/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡­ğŸ‡º</span> Hongrie</a>
                                <a href="/fr/roumanie/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡·ğŸ‡´</span> Roumanie</a>
                                <a href="/fr/croatie/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡­ğŸ‡·</span> Croatie</a>
                                <a href="/fr/turquie/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¹ğŸ‡·</span> Turquie</a>
                            </div>
                            <div class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">AmÃ©riques</div>
                            <div class="grid grid-cols-2 gap-x-6 gap-y-1 mb-4">
                                <a href="/fr/usa/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡ºğŸ‡¸</span> USA</a>
                                <a href="/fr/canada/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¨ğŸ‡¦</span> Canada</a>
                                <a href="/fr/bresil/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡§ğŸ‡·</span> BrÃ©sil</a>
                                <a href="/fr/mexique/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡²ğŸ‡½</span> Mexique</a>
                                <a href="/fr/argentine/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¦ğŸ‡·</span> Argentine</a>
                                <a href="/fr/chili/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¨ğŸ‡±</span> Chili</a>
                                <a href="/fr/colombie/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¨ğŸ‡´</span> Colombie</a>
                                <a href="/fr/perou/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡µğŸ‡ª</span> PÃ©rou</a>
                            </div>
                            <div class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">Asie-Pacifique</div>
                            <div class="grid grid-cols-2 gap-x-6 gap-y-1 mb-4">
                                <a href="/fr/japon/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¯ğŸ‡µ</span> Japon</a>
                                <a href="/fr/coree-du-sud/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡°ğŸ‡·</span> CorÃ©e du Sud</a>
                                <a href="/fr/chine/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¨ğŸ‡³</span> Chine</a>
                                <a href="/fr/singapour/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¸ğŸ‡¬</span> Singapour</a>
                                <a href="/fr/australie/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¦ğŸ‡º</span> Australie</a>
                                <a href="/fr/hong-kong/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡­ğŸ‡°</span> Hong Kong</a>
                                <a href="/fr/inde/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡®ğŸ‡³</span> Inde</a>
                                <a href="/fr/nouvelle-zelande/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡³ğŸ‡¿</span> Nouvelle-ZÃ©lande</a>
                                <a href="/fr/indonesie/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡®ğŸ‡©</span> IndonÃ©sie</a>
                                <a href="/fr/malaisie/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡²ğŸ‡¾</span> Malaisie</a>
                                <a href="/fr/thailande/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¹ğŸ‡­</span> ThaÃ¯lande</a>
                                <a href="/fr/pakistan/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡µğŸ‡°</span> Pakistan</a>
                                <a href="/fr/philippines/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡µğŸ‡­</span> Philippines</a>
                                <a href="/fr/vietnam/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡»ğŸ‡³</span> Vietnam</a>
                            </div>
                            <div class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">Moyen-Orient & Afrique</div>
                            <div class="grid grid-cols-2 gap-x-6 gap-y-1 mb-4">
                                <a href="/fr/maroc/simulateur-impot-revenu/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡²ğŸ‡¦</span> Maroc</a>
                                <a href="/fr/dubai/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¦ğŸ‡ª</span> Ã‰mirats arabes</a>
                                <a href="/fr/arabie-saoudite/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¸ğŸ‡¦</span> Arabie Saoudite</a>
                                <a href="/fr/qatar/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¶ğŸ‡¦</span> Qatar</a>
                                <a href="/fr/koweit/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡°ğŸ‡¼</span> KoweÃ¯t</a>
                                <a href="/fr/egypte/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡ªğŸ‡¬</span> Ã‰gypte</a>
                                <a href="/fr/afrique-du-sud/simulateur-impot/" class="flex items-center gap-2 px-2 py-1.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-md transition-colors"><span>ğŸ‡¿ğŸ‡¦</span> Afrique du Sud</a>
                            </div>
                            <div class="border-t border-slate-100 pt-3">
                                <a href="/fr/comparateur-global/" class="flex items-center gap-2 text-sm font-medium text-indigo-600 hover:text-indigo-700 transition-colors">
                                    <iconify-icon icon="lucide:bar-chart-3" width="16"></iconify-icon> ğŸ“Š Comparer tous les pays â†’
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <a href="/fr/faq/" class="hover:text-slate-900 transition-colors">FAQ</a>
            </div>
            <div class="flex items-center gap-3">
                <!-- Language Switcher -->
                <div class="relative">
                    <button onclick="document.getElementById('lang-dropdown-page').classList.toggle('hidden')" class="flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-slate-600 hover:text-slate-900 bg-slate-100 hover:bg-slate-200 border border-slate-200 rounded-full transition-all" title="Changer de langue">
                        <span class="lang-flag">ğŸ‡«ğŸ‡·</span>
                        <iconify-icon icon="lucide:chevron-down" width="14"></iconify-icon>
                    </button>
                    <div id="lang-dropdown-page" class="hidden absolute top-full right-0 mt-2 bg-white border border-slate-200 rounded-lg shadow-lg min-w-[140px] py-1 z-50">
                        <a href="/fr/france/simulateur-impot-revenu/" class="w-full flex items-center gap-2 px-3 py-2 text-sm text-slate-700 bg-slate-50 transition-colors">
                            <span>ğŸ‡«ğŸ‡·</span> Francais
                        </a>
                        <a href="/en/france/income-tax/" class="w-full flex items-center gap-2 px-3 py-2 text-sm text-slate-700 hover:bg-slate-50 transition-colors">
                            <span>ğŸ‡¬ğŸ‡§</span> English
                        </a>
                    </div>
                </div>
                <!-- Mobile Menu Button -->
                <button onclick="document.getElementById('mobile-menu').classList.toggle('hidden')" class="md:hidden p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors">
                    <iconify-icon icon="lucide:menu" width="24"></iconify-icon>
                </button>
            </div>
        </div>
        <!-- Mobile Menu (AccordÃ©ons) -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-slate-200">
            <div class="px-6 py-4 space-y-1">
                <!-- France Accordion -->
                <div>
                    <button onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('.chevron-icon').classList.toggle('rotate-180')" class="w-full flex items-center justify-between py-3 text-sm font-semibold text-slate-900">
                        <span class="flex items-center gap-2">
                            <iconify-icon icon="circle-flags:fr" width="18"></iconify-icon> France
                        </span>
                        <iconify-icon icon="lucide:chevron-down" width="16" class="chevron-icon text-slate-400 transition-transform duration-200"></iconify-icon>
                    </button>
                    <div class="hidden pl-6 pb-3 space-y-2">
                        <a href="/fr/france/simulateur-impot-revenu/" class="flex items-center gap-2 text-sm text-slate-600 hover:text-indigo-600 py-1">
                            <iconify-icon icon="lucide:landmark" width="16" class="text-indigo-500"></iconify-icon> Simulateur ImpÃ´t
                        </a>
                        <a href="/fr/france/simulateur-salaire-brut-net/" class="flex items-center gap-2 text-sm text-slate-600 hover:text-indigo-600 py-1">
                            <iconify-icon icon="lucide:calculator" width="16" class="text-indigo-500"></iconify-icon> Brut vers Net
                        </a>
                        <a href="/fr/france/guide/" class="flex items-center gap-2 text-sm text-slate-600 hover:text-indigo-600 py-1">
                            <iconify-icon icon="lucide:book-open" width="16" class="text-indigo-500"></iconify-icon> Guide Fiscal
                        </a>
                        <a href="/fr/france/simulateur-chomage-are/" class="flex items-center gap-2 text-sm text-slate-600 hover:text-indigo-600 py-1">
                            <span>ğŸ“‰</span> ChÃ´mage ARE
                        </a>
                        <a href="/fr/france/simulateur-indemnite-licenciement/" class="flex items-center gap-2 text-sm text-slate-600 hover:text-indigo-600 py-1">
                            <span>ğŸ“‹</span> Licenciement
                        </a>
                        <a href="/fr/france/simulateur-rupture-conventionnelle/" class="flex items-center gap-2 text-sm text-slate-600 hover:text-indigo-600 py-1">
                            <span>ğŸ¤</span> Rupture Conv.
                        </a>
                        <a href="/fr/france/simulateur-apl/" class="flex items-center gap-2 text-sm text-slate-600 hover:text-indigo-600 py-1">
                            <span>ğŸ </span> APL
                        </a>
                        <a href="/fr/france/creche-tarifs/" class="flex items-center gap-2 text-sm text-slate-600 hover:text-indigo-600 py-1">
                            <span>ğŸ‘¶</span> CrÃ¨che
                        </a>
                        <a href="/fr/france/simulateur-indemnite-kilometrique/" class="flex items-center gap-2 text-sm text-slate-600 hover:text-indigo-600 py-1">
                            <span>ğŸš—</span> Frais Km
                        </a>
                        <div class="border-t border-slate-100 my-1"></div>
                        <a href="/fr/comparateur-salaire-france-maroc/" class="flex items-center gap-2 text-sm text-indigo-600 font-medium py-1">
                            <span>ğŸ”€</span> Comparer France vs Maroc
                        </a>
                    </div>
                </div>
                <!-- Maroc Accordion -->
                <div>
                    <button onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('.chevron-icon').classList.toggle('rotate-180')" class="w-full flex items-center justify-between py-3 text-sm font-semibold text-slate-900 border-t border-slate-100">
                        <span class="flex items-center gap-2">
                            <iconify-icon icon="circle-flags:ma" width="18"></iconify-icon> Maroc
                        </span>
                        <iconify-icon icon="lucide:chevron-down" width="16" class="chevron-icon text-slate-400 transition-transform duration-200"></iconify-icon>
                    </button>
                    <div class="hidden pl-6 pb-3 space-y-2">
                        <a href="/fr/maroc/simulateur-impot-revenu/" class="flex items-center gap-2 text-sm text-slate-600 hover:text-emerald-600 py-1">
                            <iconify-icon icon="lucide:landmark" width="16" class="text-emerald-500"></iconify-icon> Simulateur ImpÃ´t
                        </a>
                        <a href="/fr/maroc/simulateur-salaire-brut-net/" class="flex items-center gap-2 text-sm text-slate-600 hover:text-emerald-600 py-1">
                            <iconify-icon icon="lucide:calculator" width="16" class="text-emerald-500"></iconify-icon> Brut vers Net
                        </a>
                        <a href="/fr/maroc/guide/" class="flex items-center gap-2 text-sm text-slate-600 hover:text-emerald-600 py-1">
                            <iconify-icon icon="lucide:book-open" width="16" class="text-emerald-500"></iconify-icon> Guide Fiscal
                        </a>
                        <div class="border-t border-slate-100 my-1"></div>
                        <a href="/fr/comparateur-salaire-france-maroc/" class="flex items-center gap-2 text-sm text-emerald-600 font-medium py-1">
                            <span>ğŸ”€</span> Comparer France vs Maroc
                        </a>
                    </div>
                </div>
                <!-- Tous les pays Accordion -->
                <div>
                    <button onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('.chevron-icon').classList.toggle('rotate-180')" class="w-full flex items-center justify-between py-3 text-sm font-semibold text-slate-900 border-t border-slate-100">
                        <span class="flex items-center gap-2">
                            <iconify-icon icon="lucide:globe" width="18"></iconify-icon> Tous les pays
                        </span>
                        <iconify-icon icon="lucide:chevron-down" width="16" class="chevron-icon text-slate-400 transition-transform duration-200"></iconify-icon>
                    </button>
                    <div class="hidden pl-4 pb-3 space-y-3">
                        <div>
                            <div class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2">â­ Populaires</div>
                            <div class="grid grid-cols-2 gap-1">
                                <a href="/fr/france/simulateur-impot-revenu/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡«ğŸ‡· France</a>
                                <a href="/fr/maroc/simulateur-impot-revenu/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡²ğŸ‡¦ Maroc</a>
                                <a href="/fr/usa/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡ºğŸ‡¸ USA</a>
                                <a href="/fr/royaume-uni/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¬ğŸ‡§ Royaume-Uni</a>
                                <a href="/fr/suisse/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¨ğŸ‡­ Suisse</a>
                                <a href="/fr/dubai/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¦ğŸ‡ª Dubai</a>
                            </div>
                        </div>
                        <div>
                            <div class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2">Europe</div>
                            <div class="grid grid-cols-2 gap-1">
                                <a href="/fr/allemagne/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡©ğŸ‡ª Allemagne</a>
                                <a href="/fr/belgique/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡§ğŸ‡ª Belgique</a>
                                <a href="/fr/espagne/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡ªğŸ‡¸ Espagne</a>
                                <a href="/fr/italie/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡®ğŸ‡¹ Italie</a>
                                <a href="/fr/pays-bas/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡³ğŸ‡± Pays-Bas</a>
                                <a href="/fr/portugal/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡µğŸ‡¹ Portugal</a>
                                <a href="/fr/suede/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¸ğŸ‡ª SuÃ¨de</a>
                                <a href="/fr/norvege/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡³ğŸ‡´ NorvÃ¨ge</a>
                                <a href="/fr/danemark/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡©ğŸ‡° Danemark</a>
                                <a href="/fr/irlande/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡®ğŸ‡ª Irlande</a>
                                <a href="/fr/luxembourg/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡±ğŸ‡º Luxembourg</a>
                                <a href="/fr/autriche/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¦ğŸ‡¹ Autriche</a>
                                <a href="/fr/finlande/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡«ğŸ‡® Finlande</a>
                                <a href="/fr/pologne/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡µğŸ‡± Pologne</a>
                                <a href="/fr/grece/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¬ğŸ‡· GrÃ¨ce</a>
                                <a href="/fr/tchequie/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¨ğŸ‡¿ TchÃ©quie</a>
                                <a href="/fr/hongrie/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡­ğŸ‡º Hongrie</a>
                                <a href="/fr/roumanie/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡·ğŸ‡´ Roumanie</a>
                                <a href="/fr/croatie/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡­ğŸ‡· Croatie</a>
                            </div>
                        </div>
                        <div>
                            <div class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2">AmÃ©riques</div>
                            <div class="grid grid-cols-2 gap-1">
                                <a href="/fr/usa/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡ºğŸ‡¸ USA</a>
                                <a href="/fr/canada/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¨ğŸ‡¦ Canada</a>
                                <a href="/fr/mexique/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡²ğŸ‡½ Mexique</a>
                                <a href="/fr/bresil/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡§ğŸ‡· BrÃ©sil</a>
                                <a href="/fr/argentine/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¦ğŸ‡· Argentine</a>
                                <a href="/fr/chili/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¨ğŸ‡± Chili</a>
                                <a href="/fr/colombie/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¨ğŸ‡´ Colombie</a>
                                <a href="/fr/perou/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡µğŸ‡ª PÃ©rou</a>
                            </div>
                        </div>
                        <div>
                            <div class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2">Asie & Moyen-Orient</div>
                            <div class="grid grid-cols-2 gap-1">
                                <a href="/fr/japon/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¯ğŸ‡µ Japon</a>
                                <a href="/fr/chine/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¨ğŸ‡³ Chine</a>
                                <a href="/fr/coree-du-sud/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡°ğŸ‡· CorÃ©e du Sud</a>
                                <a href="/fr/inde/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡®ğŸ‡³ Inde</a>
                                <a href="/fr/singapour/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¸ğŸ‡¬ Singapour</a>
                                <a href="/fr/hong-kong/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡­ğŸ‡° Hong Kong</a>
                                <a href="/fr/dubai/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¦ğŸ‡ª Dubai</a>
                                <a href="/fr/qatar/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¶ğŸ‡¦ Qatar</a>
                                <a href="/fr/koweit/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡°ğŸ‡¼ KoweÃ¯t</a>
                                <a href="/fr/arabie-saoudite/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¸ğŸ‡¦ Arabie Saoudite</a>
                                <a href="/fr/turquie/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¹ğŸ‡· Turquie</a>
                                <a href="/fr/indonesie/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡®ğŸ‡© IndonÃ©sie</a>
                                <a href="/fr/malaisie/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡²ğŸ‡¾ Malaisie</a>
                                <a href="/fr/pakistan/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡µğŸ‡° Pakistan</a>
                                <a href="/fr/thailande/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¹ğŸ‡­ ThaÃ¯lande</a>
                                <a href="/fr/philippines/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡µğŸ‡­ Philippines</a>
                                <a href="/fr/vietnam/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡»ğŸ‡³ Vietnam</a>
                                <a href="/fr/egypte/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡ªğŸ‡¬ Ã‰gypte</a>
                            </div>
                        </div>
                        <div>
                            <div class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2">Afrique & OcÃ©anie</div>
                            <div class="grid grid-cols-2 gap-1">
                                <a href="/fr/afrique-du-sud/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¿ğŸ‡¦ Afrique du Sud</a>
                                <a href="/fr/australie/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡¦ğŸ‡º Australie</a>
                                <a href="/fr/nouvelle-zelande/simulateur-impot/" class="text-sm text-slate-600 hover:text-slate-900 py-1">ğŸ‡³ğŸ‡¿ Nouvelle-ZÃ©lande</a>
                            </div>
                        </div>
                        <div class="border-t border-slate-100 pt-2">
                            <a href="/fr/comparateur-global/" class="flex items-center gap-2 text-sm font-medium text-indigo-600">
                                ğŸ“Š Comparer tous les pays â†’
                            </a>
                        </div>
                    </div>
                </div>
                <!-- FAQ & other links -->
                <div class="border-t border-slate-100">
                    <a href="/fr/faq/" class="flex items-center gap-2 py-3 text-sm font-semibold text-slate-900">
                        <iconify-icon icon="lucide:help-circle" width="18"></iconify-icon> FAQ
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <main class="flex-grow pt-16">
        <!-- Hero Section -->
        <section class="pt-8 pb-6 md:pt-10 md:pb-8 text-center px-4">
            <div class="inline-flex items-center gap-2 rounded-full bg-emerald-50 border border-emerald-200 px-4 py-1.5 mb-6">
                <i data-lucide="sparkles" class="h-4 w-4 text-emerald-600"></i>
                <span class="text-sm font-medium text-emerald-700">Bareme 2026 - 100% Gratuit - Resultat instantane</span>
            </div>
            <h1 class="mx-auto max-w-4xl text-3xl font-bold tracking-tight text-slate-900 sm:text-5xl lg:text-6xl">
                ğŸ‡«ğŸ‡· <span class="text-indigo-600">Simulateur ImpÃ´t</span> France 2026
            </h1>
            <p class="mx-auto mt-6 max-w-2xl text-lg text-slate-500">
                Simulation impots gratuite et instantanee. Calculez votre impot sur le revenu et decouvrez combien vous pouvez economiser grace au <strong class="text-slate-700">PER</strong> et aux <strong class="text-slate-700">dons</strong>.
            </p>
        </section>

        <!-- Simulator Container -->
        <div id="simulateur" class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pb-20">
            <div class="grid grid-cols-1 gap-5 lg:grid-cols-12 items-start">

                <!-- Card: Situation -->
                <div class="order-1 lg:col-span-7 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center gap-3">
                            <div class="p-2 bg-indigo-50 rounded-lg text-indigo-600">
                                <i data-lucide="users" class="h-5 w-5"></i>
                            </div>
                            <h2 class="text-lg font-semibold text-slate-900">Votre situation</h2>
                        </div>
                        <div class="text-right">
                            <span class="text-xs text-slate-400">Parts fiscales</span>
                            <p class="text-lg font-bold text-indigo-600" id="display-parts">1</p>
                        </div>
                    </div>

                    <!-- Statut Marital -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-slate-700 mb-3">Statut marital</label>
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-2 sm:gap-3">
                            <button type="button" id="btn-single" class="status-btn rounded-xl border-2 p-2 sm:p-3 text-center transition-all cursor-pointer" style="border-color: #e2e8f0; background-color: white;">
                                <i data-lucide="user" class="h-5 w-5 mx-auto mb-1 text-slate-400"></i>
                                <span class="block text-xs sm:text-sm font-medium text-slate-700">Celibataire</span>
                            </button>
                            <button type="button" id="btn-married" class="status-btn rounded-xl border-2 p-2 sm:p-3 text-center transition-all cursor-pointer" style="border-color: #e2e8f0; background-color: white;">
                                <i data-lucide="heart" class="h-5 w-5 mx-auto mb-1 text-slate-400"></i>
                                <span class="block text-xs sm:text-sm font-medium text-slate-700">Marie/PACS</span>
                            </button>
                            <button type="button" id="btn-divorced" class="status-btn rounded-xl border-2 p-2 sm:p-3 text-center transition-all cursor-pointer" style="border-color: #e2e8f0; background-color: white;">
                                <i data-lucide="user-x" class="h-5 w-5 mx-auto mb-1 text-slate-400"></i>
                                <span class="block text-xs sm:text-sm font-medium text-slate-700">Divorce(e)</span>
                            </button>
                        </div>
                        <input type="hidden" id="status-input" value="single">
                    </div>

                    <!-- Enfants -->
                    <div class="mb-5 flex items-center justify-between">
                        <div>
                            <label class="block text-sm font-medium text-slate-700">Enfants a charge</label>
                            <p class="text-xs text-slate-400 mt-0.5">Mineurs ou rattaches au foyer</p>
                        </div>
                        <div class="flex items-center gap-3 rounded-lg border border-slate-200 bg-slate-50 p-1">
                            <button id="btn-child-minus" type="button" class="h-9 w-9 rounded-md bg-white text-slate-500 shadow-sm hover:text-indigo-600 hover:bg-slate-50 flex items-center justify-center transition-all active:scale-95">
                                <i data-lucide="minus" class="h-4 w-4"></i>
                            </button>
                            <span id="child-count" class="w-8 text-center text-xl font-bold text-slate-900">0</span>
                            <button id="btn-child-plus" type="button" class="h-9 w-9 rounded-md bg-white text-slate-500 shadow-sm hover:text-indigo-600 hover:bg-slate-50 flex items-center justify-center transition-all active:scale-95">
                                <i data-lucide="plus" class="h-4 w-4"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Parent Isole -->
                    <div id="parent-isole-container" class="flex items-center justify-between border-t border-slate-100 pt-4">
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-slate-700">Parent isole</label>
                            <span class="tooltip cursor-help" data-tip="Vous elevez seul(e) vos enfants">
                                <i data-lucide="help-circle" class="h-4 w-4 text-slate-400"></i>
                            </span>
                        </div>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="parent-isole" class="sr-only peer">
                            <div class="w-11 h-6 bg-slate-200 rounded-full peer peer-checked:bg-indigo-600 peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all after:shadow-sm"></div>
                        </label>
                    </div>
                </div>

                <!-- Card: Revenus -->
                <div class="order-2 lg:col-span-7 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="p-2 bg-indigo-50 rounded-lg text-indigo-600">
                            <i data-lucide="wallet" class="h-5 w-5"></i>
                        </div>
                        <h2 class="text-lg font-semibold text-slate-900">Vos revenus annuels</h2>
                    </div>

                    <!-- Revenu Principal -->
                    <div class="mb-5">
                        <label class="text-sm font-medium text-slate-700 mb-3 block">Revenu net imposable</label>
                        <div class="grid grid-cols-2 gap-3 mb-3">
                            <div>
                                <label class="block text-xs text-slate-500 mb-1">Mensuel</label>
                                <div class="relative">
                                    <input type="number" id="income1-monthly" value="3333" min="0" max="100000" class="block w-full text-right rounded-lg border-0 py-2 pl-3 pr-12 text-slate-900 ring-1 ring-slate-200 focus:ring-2 focus:ring-indigo-500 text-sm font-semibold transition-all">
                                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs">â‚¬</span>
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs text-slate-500 mb-1">Annuel</label>
                                <div class="relative">
                                    <input type="number" id="income1-input" value="40000" min="0" max="500000" class="block w-full text-right rounded-lg border-0 py-2 pl-3 pr-12 text-slate-900 ring-1 ring-slate-200 focus:ring-2 focus:ring-indigo-500 text-sm font-semibold transition-all">
                                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs">â‚¬</span>
                                </div>
                            </div>
                        </div>
                        <input type="range" id="income1-slider" min="0" max="200000" step="500" value="40000"
                               class="w-full h-3 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600 touch-pan-x"
                               style="-webkit-appearance: none; padding: 8px 0;">
                        <div class="flex justify-between text-xs text-slate-400 mt-1">
                            <span>0â‚¬</span>
                            <span>200kâ‚¬</span>
                        </div>
                    </div>

                    <!-- Toggle 2 revenus -->
                    <div id="two-incomes-toggle" class="hidden mb-5 flex items-center justify-between border-t border-slate-100 pt-4">
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-slate-700">Deux revenus dans le foyer</label>
                            <span class="tooltip cursor-help" data-tip="Activez si votre conjoint a aussi des revenus">
                                <i data-lucide="help-circle" class="h-4 w-4 text-slate-400"></i>
                            </span>
                        </div>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="has-two-incomes" class="sr-only peer">
                            <div class="w-11 h-6 bg-slate-200 rounded-full peer peer-checked:bg-indigo-600 peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all after:shadow-sm"></div>
                        </label>
                    </div>

                    <!-- Revenu Conjoint -->
                    <div id="income2-container" class="hidden mb-5 animate-in">
                        <label class="text-sm font-medium text-slate-700 mb-3 block">Revenu net imposable <span class="text-slate-400 font-normal">(conjoint)</span></label>
                        <div class="grid grid-cols-2 gap-3 mb-3">
                            <div>
                                <label class="block text-xs text-slate-500 mb-1">Mensuel</label>
                                <div class="relative">
                                    <input type="number" id="income2-monthly" value="0" min="0" max="100000" class="block w-full text-right rounded-lg border-0 py-2 pl-3 pr-12 text-slate-900 ring-1 ring-slate-200 focus:ring-2 focus:ring-indigo-500 text-sm font-semibold transition-all">
                                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs">â‚¬</span>
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs text-slate-500 mb-1">Annuel</label>
                                <div class="relative">
                                    <input type="number" id="income2-input" value="0" min="0" max="500000" class="block w-full text-right rounded-lg border-0 py-2 pl-3 pr-12 text-slate-900 ring-1 ring-slate-200 focus:ring-2 focus:ring-indigo-500 text-sm font-semibold transition-all">
                                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs">â‚¬</span>
                                </div>
                            </div>
                        </div>
                        <input type="range" id="income2-slider" min="0" max="200000" step="500" value="0"
                               class="w-full h-3 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600 touch-pan-x"
                               style="-webkit-appearance: none; padding: 8px 0;">
                        <div class="flex justify-between text-xs text-slate-400 mt-1">
                            <span>0â‚¬</span>
                            <span>200kâ‚¬</span>
                        </div>
                    </div>

                    <!-- Autres revenus -->
                    <details class="border-t border-slate-100 pt-4 group">
                        <summary class="flex cursor-pointer items-center justify-between text-sm font-medium text-indigo-600 hover:text-indigo-700">
                            <span class="flex items-center gap-2">
                                <i data-lucide="plus-circle" class="h-4 w-4"></i>
                                Autres revenus (fonciers, etc.)
                            </span>
                            <i data-lucide="chevron-down" class="h-4 w-4 transition-transform group-open:rotate-180"></i>
                        </summary>
                        <div class="mt-4 space-y-4 animate-in">
                            <div>
                                <label class="block text-xs font-medium text-slate-500 mb-2">Revenus fonciers nets</label>
                                <div class="relative">
                                    <input type="number" id="income-foncier" value="0" min="0" class="block w-full rounded-lg border-0 py-2 pl-3 pr-12 text-slate-900 ring-1 ring-slate-200 focus:ring-2 focus:ring-indigo-500 text-sm transition-all">
                                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs">EUR</span>
                                </div>
                            </div>
                        </div>
                    </details>
                </div>

                <!-- Card: Frais de garde (CrÃ¨che) -->
                <div id="creche-card" class="order-4 lg:col-span-7 rounded-2xl border-2 border-pink-200 bg-gradient-to-br from-pink-50 to-white p-6 shadow-sm">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center gap-3">
                            <div class="p-2 bg-pink-100 rounded-lg text-pink-600">
                                <i data-lucide="baby" class="h-5 w-5"></i>
                            </div>
                            <div>
                                <h2 class="text-lg font-semibold text-slate-900">Frais de garde (CrÃ¨che)</h2>
                                <p class="text-xs text-slate-500">CrÃ©dit d'impÃ´t de 50% (max 1 750 EUR/enfant)</p>
                            </div>
                        </div>
                        <span class="inline-flex items-center rounded-full bg-pink-100 px-2.5 py-1 text-xs font-medium text-pink-700">
                            CrÃ©dit d'impÃ´t
                        </span>
                    </div>

                    <!-- Toggle CrÃ¨che -->
                    <div class="flex items-center justify-between mb-5">
                        <label class="text-sm font-medium text-slate-700">As-tu des frais de garde pour tes enfants ?</label>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="has-creche" class="sr-only peer">
                            <div class="w-11 h-6 bg-slate-200 rounded-full peer peer-checked:bg-pink-500 peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all after:shadow-sm"></div>
                        </label>
                    </div>

                    <!-- CrÃ¨che Details -->
                    <div id="creche-details" class="hidden space-y-4 animate-in">
                        <!-- Nombre d'enfants de moins de 6 ans -->
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-medium text-slate-700">Enfants de moins de 6 ans</label>
                                <span class="tooltip cursor-help" data-tip="Seuls les enfants de moins de 6 ans ouvrent droit au crÃ©dit">
                                    <i data-lucide="help-circle" class="h-4 w-4 text-slate-400"></i>
                                </span>
                            </div>
                            <div class="flex items-center gap-3 rounded-lg border border-slate-200 bg-slate-50 p-1">
                                <button id="btn-creche-child-minus" type="button" class="h-8 w-8 rounded-md bg-white text-slate-500 shadow-sm hover:text-pink-600 hover:bg-slate-50 flex items-center justify-center transition-all active:scale-95">
                                    <i data-lucide="minus" class="h-4 w-4"></i>
                                </button>
                                <span id="creche-child-count" class="w-6 text-center text-lg font-bold text-slate-900">0</span>
                                <button id="btn-creche-child-plus" type="button" class="h-8 w-8 rounded-md bg-white text-slate-500 shadow-sm hover:text-pink-600 hover:bg-slate-50 flex items-center justify-center transition-all active:scale-95">
                                    <i data-lucide="plus" class="h-4 w-4"></i>
                                </button>
                            </div>
                        </div>

                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <div class="flex items-center gap-2">
                                    <label class="text-sm font-medium text-slate-700">Frais de garde annuels (total)</label>
                                    <span class="tooltip cursor-help" data-tip="CrÃ¨che, assistante maternelle, garde Ã  domicile...">
                                        <i data-lucide="help-circle" class="h-4 w-4 text-slate-400"></i>
                                    </span>
                                </div>
                                <div class="relative">
                                    <input type="number" id="creche-amount" value="0" min="0" class="block w-36 text-right rounded-lg border-0 py-2 pl-3 pr-12 text-slate-900 ring-1 ring-slate-200 focus:ring-2 focus:ring-pink-500 text-sm font-semibold transition-all">
                                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs">EUR</span>
                                </div>
                            </div>
                            <input type="range" id="creche-slider" min="0" max="20000" step="100" value="0" class="w-full h-3 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600 touch-pan-x"
                           style="-webkit-appearance: none; padding: 8px 0;">
                            <div class="flex justify-between mt-1">
                                <span class="text-xs text-slate-400">0 EUR</span>
                                <span class="text-xs text-slate-400">20 000 EUR</span>
                            </div>
                        </div>

                        <div class="text-xs text-slate-500 bg-slate-50 rounded-lg p-3">
                            <p><strong>Info :</strong> Le crÃ©dit d'impÃ´t est de 50% des frais engagÃ©s, plafonnÃ© Ã  3 500 EUR par enfant de moins de 6 ans (soit 1 750 EUR de crÃ©dit max par enfant).</p>
                        </div>

                        <!-- CrÃ¨che Summary -->
                        <div class="rounded-xl bg-white border border-pink-200 p-4">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-slate-600">Frais dÃ©clarÃ©s</span>
                                <span class="text-sm font-bold text-slate-900" id="creche-total-display">0 EUR</span>
                            </div>
                            <div class="flex justify-between items-center mt-2">
                                <span class="text-sm text-slate-600">Plafond applicable (<span id="creche-children-count">0</span> enfant(s))</span>
                                <span class="text-sm font-medium text-slate-500" id="creche-plafond-display">0 EUR</span>
                            </div>
                            <div class="flex justify-between items-center mt-2 pt-2 border-t border-slate-100">
                                <span class="text-sm text-slate-600">CrÃ©dit d'impÃ´t (50%)</span>
                                <span class="text-sm font-bold text-pink-600" id="creche-credit-display">0 EUR</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card: PER -->
                <div class="order-5 lg:col-span-7 rounded-2xl border-2 border-emerald-200 bg-gradient-to-br from-emerald-50 to-white p-6 shadow-sm">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center gap-3">
                            <div class="p-2 bg-emerald-100 rounded-lg text-emerald-600">
                                <i data-lucide="piggy-bank" class="h-5 w-5"></i>
                            </div>
                            <div>
                                <h2 class="text-lg font-semibold text-slate-900">Plan d'Epargne Retraite (PER)</h2>
                                <p class="text-xs text-slate-500">Deduisez vos versements de votre revenu imposable</p>
                            </div>
                        </div>
                        <span class="inline-flex items-center rounded-full bg-emerald-100 px-2.5 py-1 text-xs font-medium text-emerald-700">
                            Optimisation
                        </span>
                    </div>

                    <!-- Toggle PER -->
                    <div class="flex items-center justify-between mb-5">
                        <label class="text-sm font-medium text-slate-700">As-tu verse sur un PER cette annee ?</label>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="has-per" class="sr-only peer">
                            <div class="w-11 h-6 bg-slate-200 rounded-full peer peer-checked:bg-emerald-500 peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all after:shadow-sm"></div>
                        </label>
                    </div>

                    <!-- PER Details -->
                    <div id="per-details" class="hidden space-y-4 animate-in">
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <label class="text-sm font-medium text-slate-700">Montant verse sur le PER</label>
                                <div class="relative">
                                    <input type="number" id="per-amount" value="0" min="0" class="block w-36 text-right rounded-lg border-0 py-2 pl-3 pr-12 text-slate-900 ring-1 ring-slate-200 focus:ring-2 focus:ring-emerald-500 text-sm font-semibold transition-all">
                                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs">EUR</span>
                                </div>
                            </div>
                            <input type="range" id="per-slider" min="0" max="30000" step="100" value="0" class="w-full h-3 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600 touch-pan-x"
                           style="-webkit-appearance: none; padding: 8px 0;">
                            <div class="flex justify-between mt-1">
                                <span class="text-xs text-slate-400">0 EUR</span>
                                <span class="text-xs text-slate-400">30 000 EUR</span>
                            </div>
                        </div>

                        <div class="flex items-center gap-2">
                            <input type="checkbox" id="per-plafond-unknown" class="rounded border-slate-300 text-emerald-600 focus:ring-emerald-500">
                            <label for="per-plafond-unknown" class="text-sm text-slate-600">Je ne connais pas mon plafond de deduction</label>
                        </div>

                        <div id="per-plafond-container">
                            <div class="flex justify-between items-center mb-2">
                                <div class="flex items-center gap-2">
                                    <label class="text-sm font-medium text-slate-700">Plafond de deduction disponible</label>
                                    <span class="tooltip cursor-help" data-tip="Visible sur votre dernier avis d'imposition">
                                        <i data-lucide="help-circle" class="h-4 w-4 text-slate-400"></i>
                                    </span>
                                </div>
                                <div class="relative">
                                    <input type="number" id="per-plafond" value="0" min="0" class="block w-36 text-right rounded-lg border-0 py-2 pl-3 pr-12 text-slate-900 ring-1 ring-slate-200 focus:ring-2 focus:ring-emerald-500 text-sm font-semibold transition-all">
                                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs">EUR</span>
                                </div>
                            </div>
                        </div>

                        <!-- PER Summary -->
                        <div class="rounded-xl bg-white border border-emerald-200 p-4">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-slate-600">Deduction retenue</span>
                                <span class="text-sm font-bold text-emerald-600" id="per-deduction-display">0 EUR</span>
                            </div>
                            <div class="flex justify-between items-center mt-2 pt-2 border-t border-slate-100">
                                <span class="text-sm text-slate-600">Revenu imposable apres PER</span>
                                <span class="text-sm font-bold text-slate-900" id="income-after-per-display">0 EUR</span>
                            </div>
                        </div>

                        <div id="per-warning" class="hidden rounded-lg bg-amber-50 border border-amber-200 p-3 text-sm text-amber-800">
                            <div class="flex gap-2">
                                <i data-lucide="alert-triangle" class="h-4 w-4 text-amber-500 flex-shrink-0 mt-0.5"></i>
                                <span>Plafond non renseigne : la deduction est estimee au montant verse.</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card: Dons -->
                <div class="order-6 lg:col-span-7 rounded-2xl border-2 border-violet-200 bg-gradient-to-br from-violet-50 to-white p-6 shadow-sm">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center gap-3">
                            <div class="p-2 bg-violet-100 rounded-lg text-violet-600">
                                <i data-lucide="heart-handshake" class="h-5 w-5"></i>
                            </div>
                            <div>
                                <h2 class="text-lg font-semibold text-slate-900">Dons & Reductions d'impot</h2>
                                <p class="text-xs text-slate-500">Reduisez directement votre impot (66% a 75%)</p>
                            </div>
                        </div>
                        <span class="inline-flex items-center rounded-full bg-violet-100 px-2.5 py-1 text-xs font-medium text-violet-700">
                            Reduction
                        </span>
                    </div>

                    <!-- Toggle Dons -->
                    <div class="flex items-center justify-between mb-5">
                        <label class="text-sm font-medium text-slate-700">As-tu fait des dons cette annee ?</label>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="has-dons" class="sr-only peer">
                            <div class="w-11 h-6 bg-slate-200 rounded-full peer peer-checked:bg-violet-500 peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all after:shadow-sm"></div>
                        </label>
                    </div>

                    <!-- Dons Details -->
                    <div id="dons-details" class="hidden space-y-4 animate-in">
                        <!-- Dons 66% -->
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <div class="flex items-center gap-2">
                                    <label class="text-sm font-medium text-slate-700">Dons associations (66%)</label>
                                    <span class="tooltip cursor-help" data-tip="Associations d'interet general, fondations...">
                                        <i data-lucide="help-circle" class="h-4 w-4 text-slate-400"></i>
                                    </span>
                                </div>
                                <div class="relative">
                                    <input type="number" id="dons-66" value="0" min="0" class="block w-36 text-right rounded-lg border-0 py-2 pl-3 pr-12 text-slate-900 ring-1 ring-slate-200 focus:ring-2 focus:ring-violet-500 text-sm font-semibold transition-all">
                                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs">EUR</span>
                                </div>
                            </div>
                            <input type="range" id="dons-66-slider" min="0" max="10000" step="50" value="0" class="w-full h-3 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600 touch-pan-x"
                           style="-webkit-appearance: none; padding: 8px 0;">
                        </div>

                        <!-- Dons 75% -->
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <div class="flex items-center gap-2">
                                    <label class="text-sm font-medium text-slate-700">Dons aide aux personnes (75%)</label>
                                    <span class="tooltip cursor-help" data-tip="Restos du Coeur, Secours Populaire... (plafonne a 1000EUR)">
                                        <i data-lucide="help-circle" class="h-4 w-4 text-slate-400"></i>
                                    </span>
                                </div>
                                <div class="relative">
                                    <input type="number" id="dons-75" value="0" min="0" class="block w-36 text-right rounded-lg border-0 py-2 pl-3 pr-12 text-slate-900 ring-1 ring-slate-200 focus:ring-2 focus:ring-violet-500 text-sm font-semibold transition-all">
                                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs">EUR</span>
                                </div>
                            </div>
                            <input type="range" id="dons-75-slider" min="0" max="2000" step="50" value="0" class="w-full h-3 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600 touch-pan-x"
                           style="-webkit-appearance: none; padding: 8px 0;">
                            <p class="text-xs text-slate-400 mt-1">75% jusqu'a 1000EUR, puis 66% au-dela</p>
                        </div>

                        <!-- Dons Summary -->
                        <div class="rounded-xl bg-white border border-violet-200 p-4">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-slate-600">Total des dons</span>
                                <span class="text-sm font-bold text-slate-900" id="dons-total-display">0 EUR</span>
                            </div>
                            <div class="flex justify-between items-center mt-2 pt-2 border-t border-slate-100">
                                <span class="text-sm text-slate-600">Reduction d'impot</span>
                                <span class="text-sm font-bold text-violet-600" id="dons-reduction-display">0 EUR</span>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Actions -->
                <div class="order-7 lg:col-span-7 flex items-center justify-between pt-2">
                    <button id="btn-reset" type="button" class="text-sm text-slate-500 hover:text-slate-900 flex items-center gap-1.5 transition-colors">
                        <i data-lucide="rotate-ccw" class="h-4 w-4"></i> Reinitialiser
                    </button>
                    <span class="text-xs text-slate-400">Bareme 2026 - Mis a jour janvier 2026</span>
                </div>

                <!-- Results Column -->
                <div class="order-3 lg:col-span-5 lg:row-span-6 lg:row-start-1 lg:col-start-8 relative">
                    <div class="lg:sticky lg:top-24 space-y-5">

                        <!-- Main Result Card -->
                        <div class="rounded-2xl bg-gradient-to-br from-slate-900 to-slate-800 text-white p-6 shadow-xl overflow-hidden relative">
                            <div class="absolute top-0 right-0 -mt-8 -mr-8 h-32 w-32 rounded-full bg-indigo-500 opacity-20 blur-2xl"></div>
                            <div class="absolute bottom-0 left-0 -mb-8 -ml-8 h-24 w-24 rounded-full bg-emerald-500 opacity-10 blur-xl"></div>

                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-slate-400 uppercase tracking-wider">Estimation impot 2026</h3>
                                <span class="inline-flex items-center rounded-full bg-white/10 px-2.5 py-1 text-xs font-medium text-white/80">
                                    <i data-lucide="zap" class="h-3 w-3 mr-1"></i> Temps reel
                                </span>
                            </div>

                            <div class="flex items-end gap-2 mb-1">
                                <span class="text-5xl font-bold tracking-tight" id="result-tax">0 EUR</span>
                            </div>
                            <p class="text-sm text-slate-400 mb-4">Impot sur le revenu estime</p>

                            <div class="h-1.5 w-full bg-slate-700 rounded-full mb-6 overflow-hidden">
                                <div id="tax-progress-bar" class="h-full bg-gradient-to-r from-indigo-400 to-indigo-500 chart-transition rounded-full" style="width: 0%"></div>
                            </div>

                            <div class="grid grid-cols-2 gap-4 border-t border-slate-700/50 pt-4">
                                <div>
                                    <p class="text-xs text-slate-400 mb-1">Taux moyen</p>
                                    <p class="text-2xl font-bold text-indigo-400" id="result-avg-rate">0%</p>
                                </div>
                                <div>
                                    <p class="text-xs text-slate-400 mb-1">Taux marginal</p>
                                    <p class="text-2xl font-bold text-white" id="result-marginal-rate">0%</p>
                                </div>
                            </div>
                        </div>

                        <!-- Savings Cards -->
                        <div class="space-y-3">
                            <!-- PER Savings -->
                            <div id="per-savings-card" class="hidden rounded-2xl bg-gradient-to-br from-emerald-500 to-emerald-600 text-white p-5 shadow-lg animate-in">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-emerald-100 mb-1">Economie grace au PER</p>
                                        <p class="text-3xl font-bold" id="result-per-savings">0 EUR</p>
                                    </div>
                                    <div class="h-14 w-14 rounded-full bg-white/20 flex items-center justify-center">
                                        <i data-lucide="piggy-bank" class="h-7 w-7"></i>
                                    </div>
                                </div>
                                <p class="text-sm text-emerald-100 mt-3">
                                    Chaque EUR verse reduit votre impot de <span id="per-efficiency">0</span> centimes.
                                </p>
                            </div>

                            <!-- Dons Savings -->
                            <div id="dons-savings-card" class="hidden rounded-2xl bg-gradient-to-br from-violet-500 to-violet-600 text-white p-5 shadow-lg animate-in">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-violet-100 mb-1">Reduction grace aux dons</p>
                                        <p class="text-3xl font-bold" id="result-dons-savings">0 EUR</p>
                                    </div>
                                    <div class="h-14 w-14 rounded-full bg-white/20 flex items-center justify-center">
                                        <i data-lucide="heart" class="h-7 w-7"></i>
                                    </div>
                                </div>
                                <p class="text-sm text-violet-100 mt-3">
                                    Vos dons de <span id="dons-total-result">0 EUR</span> reduisent directement votre impot.
                                </p>
                            </div>

                            <!-- CrÃ¨che Savings -->
                            <div id="creche-savings-card" class="hidden rounded-2xl bg-gradient-to-br from-pink-500 to-pink-600 text-white p-5 shadow-lg animate-in">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-pink-100 mb-1">CrÃ©dit frais de garde</p>
                                        <p class="text-3xl font-bold" id="result-creche-savings">0 EUR</p>
                                    </div>
                                    <div class="h-14 w-14 rounded-full bg-white/20 flex items-center justify-center">
                                        <i data-lucide="baby" class="h-7 w-7"></i>
                                    </div>
                                </div>
                                <p class="text-sm text-pink-100 mt-3">
                                    CrÃ©dit d'impÃ´t de 50% sur vos frais de garde.
                                </p>
                            </div>
                        </div>

                        <!-- Net Result Card -->
                        <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
                            <h3 class="text-sm font-semibold text-slate-900 mb-4">Votre reste a vivre</h3>

                            <div class="flex items-center gap-6 mb-6">
                                <!-- Donut Chart -->
                                <div class="relative h-28 w-28 flex-shrink-0">
                                    <div id="chart-donut" class="absolute inset-0 rounded-full chart-transition" style="background: conic-gradient(#0ea5e9 0% 10%, #f1f5f9 10% 100%);"></div>
                                    <div class="absolute inset-3 rounded-full bg-white flex items-center justify-center flex-col shadow-inner">
                                        <span class="text-xs text-slate-400">Net</span>
                                        <span id="chart-percent" class="text-lg font-bold text-slate-900">90%</span>
                                    </div>
                                </div>

                                <div class="flex-grow space-y-3">
                                    <div class="flex justify-between items-center">
                                        <div class="flex items-center gap-2">
                                            <span class="h-3 w-3 rounded-full bg-slate-200"></span>
                                            <span class="text-sm text-slate-600">Revenu net annuel</span>
                                        </div>
                                        <span class="text-sm font-semibold text-slate-900" id="result-net-annual">0 EUR</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <div class="flex items-center gap-2">
                                            <span class="h-3 w-3 rounded-full bg-indigo-500"></span>
                                            <span class="text-sm text-slate-600">Impot</span>
                                        </div>
                                        <span class="text-sm font-medium text-slate-500" id="result-tax-small">- 0 EUR</span>
                                    </div>
                                    <div class="pt-2 border-t border-slate-100">
                                        <div class="flex justify-between items-baseline">
                                            <span class="text-sm font-medium text-slate-900">Mensuel net</span>
                                            <span class="text-xl font-bold text-indigo-600" id="result-monthly">0 EUR</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Calculation Details -->
                            <details class="group">
                                <summary class="flex cursor-pointer items-center justify-between rounded-lg bg-slate-50 p-3 text-sm font-medium text-slate-700 hover:bg-slate-100 transition-colors">
                                    <span class="flex items-center gap-2">
                                        <i data-lucide="file-text" class="h-4 w-4"></i>
                                        Details du calcul
                                    </span>
                                    <i data-lucide="chevron-down" class="h-4 w-4 transition-transform group-open:rotate-180"></i>
                                </summary>
                                <div class="mt-3 px-1 text-sm text-slate-600 space-y-2" id="calc-details">
                                    <div class="flex justify-between py-1.5 border-b border-slate-100">
                                        <span>Revenu brut du foyer</span>
                                        <span class="font-medium text-slate-900" id="detail-gross">0 EUR</span>
                                    </div>
                                    <div class="flex justify-between py-1.5 border-b border-slate-100">
                                        <span>Abattement 10%</span>
                                        <span class="font-medium text-slate-900" id="detail-abattement">- 0 EUR</span>
                                    </div>
                                    <div id="detail-per-row" class="hidden flex justify-between py-1.5 border-b border-slate-100">
                                        <span>Deduction PER</span>
                                        <span class="font-medium text-emerald-600" id="detail-per">- 0 EUR</span>
                                    </div>
                                    <div class="flex justify-between py-1.5 border-b border-slate-100">
                                        <span>Revenu imposable</span>
                                        <span class="font-medium text-slate-900" id="detail-taxable">0 EUR</span>
                                    </div>
                                    <div id="detail-dons-row" class="hidden flex justify-between py-1.5 border-b border-slate-100">
                                        <span>Reduction dons</span>
                                        <span class="font-medium text-violet-600" id="detail-dons">- 0 EUR</span>
                                    </div>
                                    <div id="detail-creche-row" class="hidden flex justify-between py-1.5 border-b border-slate-100">
                                        <span>CrÃ©dit frais de garde</span>
                                        <span class="font-medium text-pink-600" id="detail-creche">- 0 EUR</span>
                                    </div>
                                    <div class="flex justify-between py-1.5 border-b border-slate-100">
                                        <span>Nombre de parts</span>
                                        <span class="font-medium text-slate-900" id="detail-parts">1</span>
                                    </div>
                                    <div class="flex justify-between py-1.5 border-b border-slate-100">
                                        <span>Quotient familial</span>
                                        <span class="font-medium text-slate-900" id="detail-qf">0 EUR</span>
                                    </div>
                                    <div class="mt-3 p-3 bg-slate-50 rounded-lg overflow-x-auto">
                                        <p class="text-xs font-medium text-slate-700 mb-3">Tranches appliquees (par part) :</p>
                                        <table class="w-full text-xs">
                                            <thead>
                                                <tr class="text-left text-slate-500 border-b border-slate-200">
                                                    <th class="pb-2 font-medium">Tranche</th>
                                                    <th class="pb-2 font-medium text-right">Montant</th>
                                                    <th class="pb-2 font-medium text-right">Taux</th>
                                                    <th class="pb-2 font-medium text-right">Impot</th>
                                                </tr>
                                            </thead>
                                            <tbody id="detail-tranches" class="text-slate-600"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </details>
                        </div>

                        <!-- Tips Card -->
                        <div class="rounded-xl bg-gradient-to-br from-indigo-50 to-white border border-indigo-100 p-4">
                            <div class="flex gap-3">
                                <div class="text-indigo-600 mt-0.5"><i data-lucide="lightbulb" class="h-5 w-5"></i></div>
                                <div>
                                    <h4 class="text-sm font-semibold text-indigo-900">Conseil personnalise</h4>
                                    <p class="text-sm text-indigo-700 mt-1 leading-relaxed" id="dynamic-tip">
                                        Analysez votre situation pour obtenir un conseil adapte.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Disclaimer -->
                        <div class="text-center text-xs text-slate-400 px-4">
                            <i data-lucide="info" class="h-3 w-3 inline mr-1"></i>
                            Estimation indicative basee sur le bareme officiel. Ne remplace pas l'avis de l'administration fiscale.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SEO Content Section -->
        <div class="mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 pb-12">

            <!-- Explanations -->
            <section class="mt-12">
                <h2 class="text-xl font-bold text-slate-900 mb-6">Comprendre l'impot sur le revenu en France</h2>
                <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
                    <div class="prose prose-slate max-w-none text-sm text-slate-600 space-y-4">
                        <p>L'<strong>impot sur le revenu (IR)</strong> est l'un des principaux impots francais. Il est calcule sur les revenus perÃ§us l'annee precedente et preleve directement a la source depuis 2019. Comprendre son fonctionnement permet d'optimiser sa situation fiscale legalement.</p>

                        <h3 class="text-base font-semibold text-slate-800 mt-6">Le bareme progressif 2026</h3>
                        <p>L'impot sur le revenu en France utilise un <strong>bareme progressif par tranches</strong>. Cela signifie que seule la portion de revenu depassant un seuil est imposee au taux superieur :</p>
                        <ul class="list-disc pl-5 space-y-1 mt-2">
                            <li><strong>0%</strong> : jusqu'a 11 497 EUR</li>
                            <li><strong>11%</strong> : de 11 497 EUR a 29 315 EUR</li>
                            <li><strong>30%</strong> : de 29 315 EUR a 83 823 EUR</li>
                            <li><strong>41%</strong> : de 83 823 EUR a 180 294 EUR</li>
                            <li><strong>45%</strong> : au-dela de 180 294 EUR</li>
                        </ul>

                        <h3 class="text-base font-semibold text-slate-800 mt-6">Le quotient familial</h3>
                        <p>Le <strong>quotient familial</strong> divise le revenu imposable par le nombre de parts du foyer fiscal. C'est un mecanisme qui reduit l'impot des familles :</p>
                        <ul class="list-disc pl-5 space-y-1 mt-2">
                            <li>Celibataire : <strong>1 part</strong></li>
                            <li>Couple marie/PACS : <strong>2 parts</strong></li>
                            <li>1er et 2eme enfant : <strong>+0,5 part</strong> chacun</li>
                            <li>A partir du 3eme enfant : <strong>+1 part</strong> chacun</li>
                            <li>Parent isole avec enfants : <strong>+0,5 part</strong> supplementaire</li>
                        </ul>

                        <h3 class="text-base font-semibold text-slate-800 mt-6">L'abattement de 10%</h3>
                        <p>Tous les salaries beneficient automatiquement d'un <strong>abattement forfaitaire de 10%</strong> sur leur revenu imposable, representant les frais professionnels. Il est plafonne a 14 171 EUR et ne peut etre inferieur a 495 EUR. Cet abattement reduit directement la base imposable.</p>

                        <h3 class="text-base font-semibold text-slate-800 mt-6">Optimisations legales courantes</h3>
                        <p>Plusieurs mecanismes permettent de reduire legalement son impot :</p>
                        <ul class="list-disc pl-5 space-y-2 mt-2">
                            <li><strong>Plan d'Epargne Retraite (PER)</strong> : les versements sont deductibles du revenu imposable, reduisant l'impot selon votre tranche marginale</li>
                            <li><strong>Dons aux associations</strong> : 66% a 75% du montant donne se transforme en reduction d'impot</li>
                            <li><strong>Investissement locatif</strong> : dispositifs Pinel, Denormandie offrent des reductions d'impot</li>
                            <li><strong>Emploi a domicile</strong> : 50% des depenses donnent droit a un credit d'impot</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Examples Section -->
            <section class="mt-8">
                <h2 class="text-xl font-bold text-slate-900 mb-6">3 exemples de calcul d'impot</h2>
                <div class="grid md:grid-cols-3 gap-4">
                    <div class="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm">
                        <div class="text-center mb-4">
                            <span class="inline-block bg-blue-100 text-blue-800 text-xs font-semibold px-3 py-1 rounded-full">Exemple 1</span>
                        </div>
                        <h3 class="font-semibold text-slate-800 text-center mb-3">Celibataire sans enfant</h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-slate-500">Revenu net imposable</span>
                                <span class="font-medium">35 000 EUR</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-500">Abattement 10%</span>
                                <span class="font-medium text-red-600">-3 500 EUR</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-500">Revenu imposable</span>
                                <span class="font-medium">31 500 EUR</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-500">Parts fiscales</span>
                                <span class="font-medium">1</span>
                            </div>
                            <div class="border-t pt-2 flex justify-between">
                                <span class="font-semibold">Impot annuel</span>
                                <span class="font-bold text-indigo-600">2 736 EUR</span>
                            </div>
                            <div class="flex justify-between text-xs text-slate-400">
                                <span>Taux moyen</span>
                                <span>7,8%</span>
                            </div>
                        </div>
                        <p class="text-xs text-slate-500 mt-3">Jeune actif celibataire avec un salaire median.</p>
                    </div>

                    <div class="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm">
                        <div class="text-center mb-4">
                            <span class="inline-block bg-green-100 text-green-800 text-xs font-semibold px-3 py-1 rounded-full">Exemple 2</span>
                        </div>
                        <h3 class="font-semibold text-slate-800 text-center mb-3">Couple avec 2 enfants</h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-slate-500">Revenus du foyer</span>
                                <span class="font-medium">70 000 EUR</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-500">Abattement 10%</span>
                                <span class="font-medium text-red-600">-7 000 EUR</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-500">Revenu imposable</span>
                                <span class="font-medium">63 000 EUR</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-500">Parts fiscales</span>
                                <span class="font-medium">3</span>
                            </div>
                            <div class="border-t pt-2 flex justify-between">
                                <span class="font-semibold">Impot annuel</span>
                                <span class="font-bold text-indigo-600">3 204 EUR</span>
                            </div>
                            <div class="flex justify-between text-xs text-slate-400">
                                <span>Taux moyen</span>
                                <span>4,6%</span>
                            </div>
                        </div>
                        <p class="text-xs text-slate-500 mt-3">Famille type avec deux revenus moyens.</p>
                    </div>

                    <div class="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm">
                        <div class="text-center mb-4">
                            <span class="inline-block bg-purple-100 text-purple-800 text-xs font-semibold px-3 py-1 rounded-full">Exemple 3</span>
                        </div>
                        <h3 class="font-semibold text-slate-800 text-center mb-3">Cadre superieur + PER</h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-slate-500">Revenu net imposable</span>
                                <span class="font-medium">90 000 EUR</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-500">Versement PER</span>
                                <span class="font-medium text-emerald-600">-10 000 EUR</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-500">Revenu imposable</span>
                                <span class="font-medium">71 000 EUR</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-500">Parts fiscales</span>
                                <span class="font-medium">1</span>
                            </div>
                            <div class="border-t pt-2 flex justify-between">
                                <span class="font-semibold">Impot annuel</span>
                                <span class="font-bold text-indigo-600">14 586 EUR</span>
                            </div>
                            <div class="flex justify-between text-xs text-emerald-600">
                                <span>Economie PER</span>
                                <span>3 000 EUR</span>
                            </div>
                        </div>
                        <p class="text-xs text-slate-500 mt-3">Cadre optimisant avec le PER (TMI 30%).</p>
                    </div>
                </div>
            </section>

            <!-- FAQ Section -->
            <section class="mt-8">
                <h2 class="text-xl font-bold text-slate-900 mb-6">Questions frequentes sur l'impot sur le revenu</h2>
                <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
                    <div class="space-y-4">
                        <details class="group border-b border-slate-100 pb-4">
                            <summary class="flex justify-between items-center cursor-pointer list-none">
                                <span class="font-medium text-slate-800">Qu'est-ce que le taux marginal d'imposition (TMI) ?</span>
                                <i data-lucide="chevron-down" class="h-5 w-5 text-slate-400 group-open:rotate-180 transition-transform"></i>
                            </summary>
                            <p class="mt-3 text-sm text-slate-600">Le <strong>taux marginal d'imposition</strong> est le taux applique a la derniere tranche de vos revenus. Il determine l'economie realisee pour chaque euro deduit (PER, dons...). Par exemple, avec un TMI de 30%, chaque euro verse sur un PER vous fait economiser 30 centimes d'impot.</p>
                        </details>

                        <details class="group border-b border-slate-100 pb-4">
                            <summary class="flex justify-between items-center cursor-pointer list-none">
                                <span class="font-medium text-slate-800">Comment fonctionne le prelevement a la source ?</span>
                                <i data-lucide="chevron-down" class="h-5 w-5 text-slate-400 group-open:rotate-180 transition-transform"></i>
                            </summary>
                            <p class="mt-3 text-sm text-slate-600">Depuis janvier 2019, l'impot est preleve chaque mois sur votre salaire par votre employeur. Le <strong>taux applique est personnalise</strong> selon votre derniere declaration. En septembre, ce taux est recalcule. Si vous avez trop paye, vous recevez un remboursement. Si vous n'avez pas assez paye, un complement est demande.</p>
                        </details>

                        <details class="group border-b border-slate-100 pb-4">
                            <summary class="flex justify-between items-center cursor-pointer list-none">
                                <span class="font-medium text-slate-800">Quelle difference entre reduction et credit d'impot ?</span>
                                <i data-lucide="chevron-down" class="h-5 w-5 text-slate-400 group-open:rotate-180 transition-transform"></i>
                            </summary>
                            <p class="mt-3 text-sm text-slate-600">Une <strong>reduction d'impot</strong> diminue l'impot du, mais ne peut pas creer de remboursement (si l'impot est nul, vous ne recuperez rien). Un <strong>credit d'impot</strong> est rembourse meme si vous n'etes pas imposable. Les dons donnent une reduction, l'emploi a domicile donne un credit.</p>
                        </details>

                        <details class="group border-b border-slate-100 pb-4">
                            <summary class="flex justify-between items-center cursor-pointer list-none">
                                <span class="font-medium text-slate-800">Comment le PER reduit-il mon impot ?</span>
                                <i data-lucide="chevron-down" class="h-5 w-5 text-slate-400 group-open:rotate-180 transition-transform"></i>
                            </summary>
                            <p class="mt-3 text-sm text-slate-600">Les versements sur un <strong>Plan d'Epargne Retraite</strong> sont deduits de votre revenu imposable (dans la limite d'un plafond). L'economie d'impot correspond a votre TMI : avec un TMI de 30%, vous economisez 30% du montant verse. Attention : l'epargne sera imposee a la sortie, mais souvent a un taux plus faible (retraite).</p>
                        </details>

                        <details class="group border-b border-slate-100 pb-4">
                            <summary class="flex justify-between items-center cursor-pointer list-none">
                                <span class="font-medium text-slate-800">A partir de quel revenu est-on imposable ?</span>
                                <i data-lucide="chevron-down" class="h-5 w-5 text-slate-400 group-open:rotate-180 transition-transform"></i>
                            </summary>
                            <p class="mt-3 text-sm text-slate-600">En 2026, un celibataire devient imposable a partir d'environ <strong>17 200 EUR de revenu net imposable</strong> (avant abattement). Apres l'abattement de 10%, le revenu imposable de 15 480 EUR depasse le seuil de 11 497 EUR. Pour un couple, le seuil est d'environ 32 200 EUR.</p>
                        </details>

                        <details class="group border-b border-slate-100 pb-4">
                            <summary class="flex justify-between items-center cursor-pointer list-none">
                                <span class="font-medium text-slate-800">Les heures supplementaires sont-elles imposables ?</span>
                                <i data-lucide="chevron-down" class="h-5 w-5 text-slate-400 group-open:rotate-180 transition-transform"></i>
                            </summary>
                            <p class="mt-3 text-sm text-slate-600">Les heures supplementaires beneficient d'une <strong>exoneration d'impot sur le revenu</strong> dans la limite de 7 500 EUR par an. Au-dela de ce plafond, elles sont imposables normalement. Cette exoneration est automatique et apparait sur votre declaration pre-remplie.</p>
                        </details>

                        <details class="group border-b border-slate-100 pb-4">
                            <summary class="flex justify-between items-center cursor-pointer list-none">
                                <span class="font-medium text-slate-800">Comment declarer des revenus fonciers ?</span>
                                <i data-lucide="chevron-down" class="h-5 w-5 text-slate-400 group-open:rotate-180 transition-transform"></i>
                            </summary>
                            <p class="mt-3 text-sm text-slate-600">Les revenus fonciers (loyers) s'ajoutent a vos autres revenus et sont imposes au bareme progressif. Deux regimes existent : le <strong>micro-foncier</strong> (abattement de 30% si loyers inferieurs a 15 000 EUR/an) ou le <strong>reel</strong> (deduction des charges reelles). Le choix depend de vos charges deductibles.</p>
                        </details>

                        <details class="group pb-4">
                            <summary class="flex justify-between items-center cursor-pointer list-none">
                                <span class="font-medium text-slate-800">Quand et comment declarer ses revenus ?</span>
                                <i data-lucide="chevron-down" class="h-5 w-5 text-slate-400 group-open:rotate-180 transition-transform"></i>
                            </summary>
                            <p class="mt-3 text-sm text-slate-600">La declaration se fait en ligne sur <strong>impots.gouv.fr</strong> entre avril et juin (date limite variable selon le departement). Votre declaration est pre-remplie avec vos salaires et revenus connus de l'administration. Vous devez verifier et completer avec vos reductions/credits d'impot et revenus non pre-remplis.</p>
                        </details>
                    </div>
                </div>
            </section>

            <!-- Sources Section -->
            <section class="mt-8 mb-8">
                <h2 class="text-xl font-bold text-slate-900 mb-6">Sources officielles</h2>
                <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
                    <div class="grid md:grid-cols-2 gap-4 text-sm">
                        <a href="https://www.impots.gouv.fr/particulier/questions/comment-est-calcule-limpot-sur-le-revenu" target="_blank" rel="noopener" class="flex items-center gap-3 p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors">
                            <i data-lucide="external-link" class="h-5 w-5 text-indigo-600"></i>
                            <div>
                                <div class="font-medium text-slate-800">impots.gouv.fr</div>
                                <div class="text-xs text-slate-500">Calcul de l'impot sur le revenu</div>
                            </div>
                        </a>
                        <a href="https://www.service-public.fr/particuliers/vosdroits/F1419" target="_blank" rel="noopener" class="flex items-center gap-3 p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors">
                            <i data-lucide="external-link" class="h-5 w-5 text-indigo-600"></i>
                            <div>
                                <div class="font-medium text-slate-800">Service-Public.fr</div>
                                <div class="text-xs text-slate-500">Bareme et tranches d'imposition</div>
                            </div>
                        </a>
                        <a href="https://bofip.impots.gouv.fr/bofip/2494-PGP.html" target="_blank" rel="noopener" class="flex items-center gap-3 p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors">
                            <i data-lucide="external-link" class="h-5 w-5 text-indigo-600"></i>
                            <div>
                                <div class="font-medium text-slate-800">BOFIP</div>
                                <div class="text-xs text-slate-500">Bulletin Officiel des Finances Publiques</div>
                            </div>
                        </a>
                        <a href="https://www.economie.gouv.fr/particuliers/prelevement-source-impot-revenu" target="_blank" rel="noopener" class="flex items-center gap-3 p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors">
                            <i data-lucide="external-link" class="h-5 w-5 text-indigo-600"></i>
                            <div>
                                <div class="font-medium text-slate-800">economie.gouv.fr</div>
                                <div class="text-xs text-slate-500">Prelevement a la source</div>
                            </div>
                        </a>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Mobile Sticky Button -->
    <button id="mobile-results-btn" class="lg:hidden mobile-sticky-btn inline-flex items-center gap-2 rounded-full px-6 py-3 text-sm font-semibold text-white shadow-lg transition-all" style="background-color: #4f46e5;">
        <i data-lucide="calculator" class="h-4 w-4"></i>
        Voir mes resultats
    </button>
            <!-- Example Calculation -->
            <div class="bg-gradient-to-br from-indigo-50 to-white rounded-2xl border border-indigo-200 shadow-sm p-6 md:p-8 mt-6">
                <h2 class="text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2">
                    <iconify-icon icon="lucide:calculator" width="20" class="text-indigo-500"></iconify-icon>
                    Exemple de calcul: â‚¬45,000
                </h2>

                <div class="space-y-4 text-sm">

                    <div class="bg-white rounded-lg p-4 border border-slate-200">
                        <h4 class="font-medium text-slate-900 mb-2">1. Quotient Familial</h4>
                        <div class="space-y-1 text-slate-600">
                            <p>Revenu imposable: 45,000â‚¬</p>
                            <p>Parts fiscales (celibataire): 1</p>
                            <p>Quotient: 45,000â‚¬</p>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg p-4 border border-slate-200">
                        <h4 class="font-medium text-slate-900 mb-2">2. Calcul par Tranches 2026</h4>
                        <div class="space-y-1 text-slate-600">
                            <p>0â‚¬ - 11,294â‚¬: 0% = 0â‚¬</p>
                            <p>11,294â‚¬ - 28,797â‚¬: 11% = 1,925â‚¬</p>
                            <p>28,797â‚¬ - 45,000â‚¬: 30% = 4,861â‚¬</p>
                            <p class="font-medium text-slate-900 pt-1 border-t">Total Impot: 6,786â‚¬</p>
                        </div>
                    </div>

                    <div class="bg-emerald-50 rounded-lg p-4 border border-emerald-200">
                        <div class="flex justify-between items-center">
                            <span class="font-medium text-emerald-800">Impot Net</span>
                            <span class="text-xl font-bold text-emerald-600">6,786â‚¬</span>
                        </div>
                        <p class="text-xs text-emerald-600 mt-1">Soit 566â‚¬/mois | Taux moyen: 15.1%</p>
                    </div>
                </div>
            </div>

            <!-- Tax Brackets Details -->
            <div class="bg-white rounded-2xl border border-slate-200 shadow-sm p-6 md:p-8 mt-6">
                <h2 class="text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2">
                    <iconify-icon icon="lucide:list" width="20" class="text-amber-500"></iconify-icon>
                    Baremes IR 2026
                </h2>

                <div class="grid md:grid-cols-2 gap-6">

                    <div>
                        <h3 class="text-sm font-medium text-slate-700 mb-2">Tranches Marginales</h3>
                        <ul class="space-y-1 text-sm text-slate-600">
                            <li>0 - 11,294â‚¬: <span class="font-medium">0%</span></li>
                            <li>11,294 - 28,797â‚¬: <span class="font-medium">11%</span></li>
                            <li>28,797 - 82,341â‚¬: <span class="font-medium">30%</span></li>
                            <li>82,341 - 177,106â‚¬: <span class="font-medium">41%</span></li>
                            <li>Au-dela: <span class="font-medium">45%</span></li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-sm font-medium text-slate-700 mb-2">Parts Fiscales</h3>
                        <ul class="space-y-1 text-sm text-slate-600">
                            <li>Celibataire: <span class="font-medium">1 part</span></li>
                            <li>Couple: <span class="font-medium">2 parts</span></li>
                            <li>1er enfant: <span class="font-medium">+0.5</span></li>
                            <li>2e enfant: <span class="font-medium">+0.5</span></li>
                            <li>3e+ enfant: <span class="font-medium">+1</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Official Sources -->
            <div class="bg-slate-50 rounded-2xl border border-slate-200 p-6 md:p-8 mt-6">
                <h2 class="text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2">
                    <iconify-icon icon="lucide:link" width="20" class="text-blue-500"></iconify-icon>
                    Sources Officielles
                </h2>

                <div class="space-y-3 text-sm">
                    <a href="https://www.impots.gouv.fr/particulier/questions/quels-sont-les-taux-dimposition-pour-2026" target="_blank" rel="noopener" class="flex items-center gap-3 p-3 bg-white rounded-lg border border-slate-200 hover:border-blue-300 hover:bg-blue-50 transition-colors">
                        <iconify-icon icon="lucide:external-link" width="16" class="text-blue-500"></iconify-icon>
                        <div>
                            <p class="font-medium text-slate-900">Service des Impots</p>
                            <p class="text-xs text-slate-500">impots.gouv.fr - Baremes officiels 2026</p>
                        </div>
                    </a>
                    <a href="https://www.service-public.fr/particuliers/vosdroits/F1419" target="_blank" rel="noopener" class="flex items-center gap-3 p-3 bg-white rounded-lg border border-slate-200 hover:border-blue-300 hover:bg-blue-50 transition-colors">
                        <iconify-icon icon="lucide:external-link" width="16" class="text-blue-500"></iconify-icon>
                        <div>
                            <p class="font-medium text-slate-900">Service Public</p>
                            <p class="text-xs text-slate-500">service-public.fr - Calcul de l impot</p>
                        </div>
                    </a>
                    <a href="https://bofip.impots.gouv.fr/" target="_blank" rel="noopener" class="flex items-center gap-3 p-3 bg-white rounded-lg border border-slate-200 hover:border-blue-300 hover:bg-blue-50 transition-colors">
                        <iconify-icon icon="lucide:external-link" width="16" class="text-blue-500"></iconify-icon>
                        <div>
                            <p class="font-medium text-slate-900">BOFiP</p>
                            <p class="text-xs text-slate-500">bofip.impots.gouv.fr - Documentation fiscale</p>
                        </div>
                    </a>
                </div>
            </div>


    <!-- Footer -->
        <footer class="py-12 px-6 border-t border-slate-200 bg-white">
        <div class="max-w-6xl mx-auto">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mb-8">
                <div>
                    <div class="flex items-center gap-2 mb-4">
                        <div class="w-6 h-6 bg-slate-900 rounded flex items-center justify-center text-white text-xs font-bold">N.</div>
                        <span class="font-semibold text-slate-900">NetSalaire</span>
                    </div>
                    <p class="text-sm text-slate-500">Simulateurs fiscaux gratuits pour la France et le Maroc.</p>
                </div>
                <div>
                    <h4 class="font-semibold text-slate-900 mb-3 text-sm">France</h4>
                    <ul class="space-y-2 text-sm text-slate-500">
                        <li><a href="/fr/france/simulateur-salaire-brut-net/" class="hover:text-slate-900">Brut vers Net</a></li>
                        <li><a href="/fr/france/simulateur-impot-revenu/" class="hover:text-slate-900">Simulateur ImpÃ´t</a></li>
                        <li><a href="/fr/france/guide/" class="hover:text-slate-900">Guide Fiscal</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold text-slate-900 mb-3 text-sm">Maroc</h4>
                    <ul class="space-y-2 text-sm text-slate-500">
                        <li><a href="/fr/maroc/simulateur-salaire-brut-net/" class="hover:text-slate-900">Brut vers Net</a></li>
                        <li><a href="/fr/maroc/simulateur-impot-revenu/" class="hover:text-slate-900">Simulateur ImpÃ´t</a></li>
                        <li><a href="/fr/maroc/guide/" class="hover:text-slate-900">Guide Fiscal</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold text-slate-900 mb-3 text-sm">Informations</h4>
                    <ul class="space-y-2 text-sm text-slate-500">
                        <li><a href="/fr/faq/" class="hover:text-slate-900">FAQ</a></li>
                        <li><a href="/fr/mentions-legales/" class="hover:text-slate-900">Mentions LÃ©gales</a></li>
                        <li><a href="/fr/politique-confidentialite/" class="hover:text-slate-900">ConfidentialitÃ©</a></li>
                    </ul>
                </div>
            </div>
            <div class="pt-8 border-t border-slate-200"><p class="text-sm text-slate-500">&copy; 2026 NetSalaire.com - Tous droits rÃ©servÃ©s</p></div>
        </div>
    </footer>

    <!-- Calculator Script -->
    <script>
    (function() {
        'use strict';

        const TAX_BRACKETS = [
            { limit: 11497, rate: 0 },
            { limit: 29315, rate: 0.11 },
            { limit: 83823, rate: 0.30 },
            { limit: 180294, rate: 0.41 },
            { limit: Infinity, rate: 0.45 }
        ];

        const ABATTEMENT_RATE = 0.10;
        const ABATTEMENT_MAX = 14171;
        const ABATTEMENT_MIN = 495;

        const state = {
            status: 'single',
            children: 0,
            parentIsole: false,
            income1: 40000,
            income2: 0,
            hasTwoIncomes: false,
            incomeFoncier: 0,
            hasPer: false,
            perAmount: 0,
            perPlafond: 0,
            perPlafondUnknown: false,
            hasDons: false,
            dons66: 0,
            dons75: 0,
            hasCreche: false,
            crecheAmount: 0,
            crecheChildren: 0
        };

        const $ = (sel) => document.querySelector(sel);
        const $$ = (sel) => document.querySelectorAll(sel);

        // === GA4 EVENT TRACKING ===
        let lastTrackedIncome = 0;
        let trackingTimeout = null;

        function trackTaxCalculation(income, tax, status) {
            clearTimeout(trackingTimeout);
            trackingTimeout = setTimeout(() => {
                if (Math.abs(income - lastTrackedIncome) < 1000) return;
                lastTrackedIncome = income;
                if (typeof gtag === 'function') {
                    gtag('event', 'tax_calculation', {
                        'event_category': 'Simulateur Impot FR',
                        'event_label': status,
                        'value': Math.round(income)
                    });
                }
            }, 1500);
        }

        const formatMoney = (val) => Math.round(val).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ' EUR';
        const formatPercent = (val) => val.toFixed(1) + '%';
        const clamp = (val, min, max) => Math.min(Math.max(val, min), max);

        function calculateParts() {
            let parts = state.status === 'married' ? 2 : 1;
            if (state.children >= 1) parts += 0.5;
            if (state.children >= 2) parts += 0.5;
            if (state.children >= 3) parts += (state.children - 2);
            if (state.parentIsole && state.children > 0 && state.status !== 'married') {
                parts += 0.5;
            }
            return parts;
        }

        function calculateAbattement(income) {
            const abattement = income * ABATTEMENT_RATE;
            return clamp(abattement, income > 0 ? ABATTEMENT_MIN : 0, ABATTEMENT_MAX);
        }

        function calculateTax(taxableIncome, parts) {
            const qf = taxableIncome / parts;
            let taxPerPart = 0;
            let marginalRate = 0;
            const tranchesApplied = [];

            for (let i = 0; i < TAX_BRACKETS.length; i++) {
                const bracket = TAX_BRACKETS[i];
                const prevLimit = i === 0 ? 0 : TAX_BRACKETS[i - 1].limit;
                let amountInBracket = 0;
                let taxInBracket = 0;

                if (qf > prevLimit) {
                    amountInBracket = Math.min(qf, bracket.limit) - prevLimit;
                    taxInBracket = amountInBracket * bracket.rate;
                    taxPerPart += taxInBracket;
                    marginalRate = bracket.rate;
                }

                tranchesApplied.push({
                    from: prevLimit,
                    to: bracket.limit,
                    rate: bracket.rate,
                    amount: amountInBracket,
                    tax: taxInBracket
                });
            }

            return { tax: Math.floor(taxPerPart * parts), marginalRate, qf, tranchesApplied };
        }

        function calculate() {
            const parts = calculateParts();
            let grossIncome = state.income1 + state.incomeFoncier;
            if (state.status === 'married' && state.hasTwoIncomes) {
                grossIncome += state.income2;
            }

            let totalAbattement = calculateAbattement(state.income1);
            if (state.status === 'married' && state.hasTwoIncomes) {
                totalAbattement += calculateAbattement(state.income2);
            }

            let perDeduction = 0;
            if (state.hasPer && state.perAmount > 0) {
                if (state.perPlafondUnknown || state.perPlafond === 0) {
                    perDeduction = state.perAmount;
                } else {
                    perDeduction = Math.min(state.perAmount, state.perPlafond);
                }
            }

            const incomeAfterAbattement = Math.max(0, grossIncome - totalAbattement);
            const taxableIncome = Math.max(0, incomeAfterAbattement - perDeduction);
            const result = calculateTax(taxableIncome, parts);
            const resultWithoutPer = calculateTax(incomeAfterAbattement, parts);
            const perSavings = resultWithoutPer.tax - result.tax;

            let donsReduction = 0;
            let donsTotal = 0;
            if (state.hasDons) {
                donsTotal = state.dons66 + state.dons75;
                const dons75Capped = Math.min(state.dons75, 1000);
                const dons75Excess = Math.max(0, state.dons75 - 1000);
                donsReduction = Math.floor((state.dons66 * 0.66) + (dons75Capped * 0.75) + (dons75Excess * 0.66));
                const maxDonsReduction = Math.floor(taxableIncome * 0.20);
                donsReduction = Math.min(donsReduction, maxDonsReduction);
            }

            // CrÃ©dit d'impÃ´t frais de garde (crÃ¨che)
            let crecheCredit = 0;
            let crechePlafond = 0;
            if (state.hasCreche && state.crecheChildren > 0 && state.crecheAmount > 0) {
                // Plafond de 3500â‚¬ par enfant de moins de 6 ans
                crechePlafond = state.crecheChildren * 3500;
                const fraisRetenus = Math.min(state.crecheAmount, crechePlafond);
                // CrÃ©dit de 50%
                crecheCredit = Math.floor(fraisRetenus * 0.50);
            }

            const finalTax = Math.max(0, result.tax - donsReduction - crecheCredit);
            const netAfterTax = grossIncome - finalTax;
            const monthly = netAfterTax / 12;
            const avgRate = grossIncome > 0 ? (finalTax / grossIncome) * 100 : 0;
            const taxPercent = grossIncome > 0 ? (finalTax / grossIncome) * 100 : 0;

            updateUI({
                parts, grossIncome, totalAbattement, perDeduction, incomeAfterAbattement, taxableIncome,
                tax: finalTax, taxBeforeDons: result.tax, marginalRate: result.marginalRate, qf: result.qf,
                tranchesApplied: result.tranchesApplied, netAfterTax, monthly, avgRate, taxPercent, perSavings, donsTotal, donsReduction,
                crecheCredit, crechePlafond
            });
            if (userHasInteracted) updateURL();

            // GA4 tracking
            trackTaxCalculation(grossIncome, finalTax, state.status);
        }

        function updateUI(data) {
            $('#display-parts').textContent = data.parts;

            if (state.hasPer) {
                $('#per-deduction-display').textContent = formatMoney(data.perDeduction);
                $('#income-after-per-display').textContent = formatMoney(data.taxableIncome);
                if (state.perPlafondUnknown || state.perPlafond === 0) {
                    $('#per-warning').classList.remove('hidden');
                } else {
                    $('#per-warning').classList.add('hidden');
                }
            }

            $('#result-tax').textContent = formatMoney(data.tax);
            $('#result-avg-rate').textContent = formatPercent(data.avgRate);
            $('#result-marginal-rate').textContent = (data.marginalRate * 100).toFixed(0) + '%';
            $('#tax-progress-bar').style.width = Math.min(data.avgRate * 2.5, 100) + '%';

            if (state.hasPer && data.perSavings > 0) {
                $('#per-savings-card').classList.remove('hidden');
                $('#result-per-savings').textContent = formatMoney(data.perSavings);
                const efficiency = data.perDeduction > 0 ? Math.round((data.perSavings / data.perDeduction) * 100) : 0;
                $('#per-efficiency').textContent = efficiency;
            } else {
                $('#per-savings-card').classList.add('hidden');
            }

            if (state.hasDons && data.donsReduction > 0) {
                $('#dons-savings-card').classList.remove('hidden');
                $('#result-dons-savings').textContent = formatMoney(data.donsReduction);
                $('#dons-total-result').textContent = formatMoney(data.donsTotal);
            } else {
                $('#dons-savings-card').classList.add('hidden');
            }

            if (state.hasDons) {
                $('#dons-total-display').textContent = formatMoney(data.donsTotal);
                $('#dons-reduction-display').textContent = formatMoney(data.donsReduction);
            }

            // CrÃ¨che UI update
            if (state.hasCreche) {
                $('#creche-total-display').textContent = formatMoney(state.crecheAmount);
                $('#creche-children-count').textContent = state.crecheChildren;
                $('#creche-plafond-display').textContent = formatMoney(data.crechePlafond);
                $('#creche-credit-display').textContent = formatMoney(data.crecheCredit);
            }

            // CrÃ¨che savings card
            if (state.hasCreche && data.crecheCredit > 0) {
                $('#creche-savings-card').classList.remove('hidden');
                $('#result-creche-savings').textContent = formatMoney(data.crecheCredit);
            } else {
                $('#creche-savings-card').classList.add('hidden');
            }

            $('#chart-percent').textContent = (100 - data.taxPercent).toFixed(0) + '%';
            $('#chart-donut').style.background = `conic-gradient(#0ea5e9 0% ${data.taxPercent}%, #f1f5f9 ${data.taxPercent}% 100%)`;
            $('#result-net-annual').textContent = formatMoney(data.netAfterTax);
            $('#result-tax-small').textContent = '- ' + formatMoney(data.tax);
            $('#result-monthly').textContent = formatMoney(data.monthly);

            $('#detail-gross').textContent = formatMoney(data.grossIncome);
            $('#detail-abattement').textContent = '- ' + formatMoney(data.totalAbattement);

            if (state.hasPer && data.perDeduction > 0) {
                $('#detail-per-row').classList.remove('hidden');
                $('#detail-per').textContent = '- ' + formatMoney(data.perDeduction);
            } else {
                $('#detail-per-row').classList.add('hidden');
            }

            $('#detail-taxable').textContent = formatMoney(data.taxableIncome);

            if (state.hasDons && data.donsReduction > 0) {
                $('#detail-dons-row').classList.remove('hidden');
                $('#detail-dons').textContent = '- ' + formatMoney(data.donsReduction);
            } else {
                $('#detail-dons-row').classList.add('hidden');
            }

            if (state.hasCreche && data.crecheCredit > 0) {
                $('#detail-creche-row').classList.remove('hidden');
                $('#detail-creche').textContent = '- ' + formatMoney(data.crecheCredit);
            } else {
                $('#detail-creche-row').classList.add('hidden');
            }

            $('#detail-parts').textContent = data.parts;
            $('#detail-qf').textContent = formatMoney(data.qf);

            $('#detail-tranches').innerHTML = data.tranchesApplied.map((t, i) => {
                const isActive = t.amount > 0;
                const rowClass = isActive ? 'text-slate-900 font-medium' : 'text-slate-400';
                const bgClass = isActive ? 'bg-indigo-50/50' : '';
                let trancheLabel;
                if (i === 0) trancheLabel = `Jusqu'a ${formatMoney(t.to)}`;
                else if (t.to === Infinity) trancheLabel = `Au-dela de ${formatMoney(t.from)}`;
                else trancheLabel = `${formatMoney(t.from + 1)} - ${formatMoney(t.to)}`;
                return `<tr class="${bgClass}"><td class="py-1.5 pr-2 ${rowClass}">${trancheLabel}</td><td class="py-1.5 text-right ${rowClass}">${formatMoney(t.amount)}</td><td class="py-1.5 text-right ${rowClass}">${(t.rate * 100).toFixed(0)}%</td><td class="py-1.5 text-right ${isActive ? 'text-indigo-600 font-semibold' : 'text-slate-400'}">${formatMoney(t.tax)}</td></tr>`;
            }).join('') + `<tr class="border-t border-slate-200 font-semibold text-slate-900"><td class="pt-2">Total x ${data.parts} parts</td><td></td><td></td><td class="pt-2 text-right text-indigo-600">${formatMoney(data.taxBeforeDons)}</td></tr>`;

            updateTip(data);
        }

        function updateTip(data) {
            let tip = '';
            if (data.tax === 0) {
                tip = "Vous n'etes pas imposable. Pensez a epargner via un Livret A ou LEP.";
            } else if (!state.hasPer && data.marginalRate >= 0.30) {
                tip = `Avec un taux marginal de ${(data.marginalRate * 100).toFixed(0)}%, le PER serait tres efficace. Chaque EUR verse vous ferait economiser ${(data.marginalRate * 100).toFixed(0)} centimes d'impot.`;
            } else if (state.hasPer && data.perSavings > 0) {
                tip = `Excellent ! Votre PER vous fait economiser ${formatMoney(data.perSavings)} d'impot.`;
            } else {
                tip = "Pensez aux deductions (PER, dons) pour reduire votre impot.";
            }
            $('#dynamic-tip').textContent = tip;
        }

        function updateURL() {
            const params = new URLSearchParams();
            params.set('status', state.status);
            params.set('children', state.children);
            if (state.parentIsole) params.set('isole', '1');
            params.set('income1', state.income1);
            if (state.status === 'married' && state.hasTwoIncomes) params.set('income2', state.income2);
            if (state.incomeFoncier > 0) params.set('foncier', state.incomeFoncier);
            if (state.hasPer) {
                params.set('per', state.perAmount);
                if (!state.perPlafondUnknown && state.perPlafond > 0) params.set('plafond', state.perPlafond);
            }
            if (state.hasDons) {
                if (state.dons66 > 0) params.set('dons66', state.dons66);
                if (state.dons75 > 0) params.set('dons75', state.dons75);
            }
            if (state.hasCreche && state.crecheAmount > 0) {
                params.set('creche', state.crecheAmount);
                params.set('crecheEnfants', state.crecheChildren);
            }
            history.replaceState(null, '', window.location.pathname + '?' + params.toString());
        }

        function loadFromURL() {
            const params = new URLSearchParams(window.location.search);
            if (params.has('status')) { setStatus(params.get('status')); }
            if (params.has('children')) { state.children = parseInt(params.get('children')) || 0; $('#child-count').textContent = state.children; }
            if (params.has('isole')) { state.parentIsole = params.get('isole') === '1'; $('#parent-isole').checked = state.parentIsole; }
            if (params.has('income1')) { state.income1 = parseInt(params.get('income1')) || 40000; $('#income1-input').value = state.income1; $('#income1-slider').value = Math.min(state.income1, 200000); }
            if (params.has('income2')) { state.income2 = parseInt(params.get('income2')) || 0; state.hasTwoIncomes = true; $('#has-two-incomes').checked = true; $('#income2-input').value = state.income2; $('#income2-slider').value = Math.min(state.income2, 200000); }
            if (params.has('foncier')) { state.incomeFoncier = parseInt(params.get('foncier')) || 0; $('#income-foncier').value = state.incomeFoncier; }
            if (params.has('per')) { state.hasPer = true; state.perAmount = parseInt(params.get('per')) || 0; $('#has-per').checked = true; $('#per-amount').value = state.perAmount; $('#per-slider').value = Math.min(state.perAmount, 30000); $('#per-details').classList.remove('hidden'); if (params.has('plafond')) { state.perPlafond = parseInt(params.get('plafond')) || 0; $('#per-plafond').value = state.perPlafond; } }
            if (params.has('dons66') || params.has('dons75')) { state.hasDons = true; $('#has-dons').checked = true; $('#dons-details').classList.remove('hidden'); if (params.has('dons66')) { state.dons66 = parseInt(params.get('dons66')) || 0; $('#dons-66').value = state.dons66; $('#dons-66-slider').value = Math.min(state.dons66, 10000); } if (params.has('dons75')) { state.dons75 = parseInt(params.get('dons75')) || 0; $('#dons-75').value = state.dons75; $('#dons-75-slider').value = Math.min(state.dons75, 2000); } }
            if (params.has('creche')) { state.hasCreche = true; state.crecheAmount = parseInt(params.get('creche')) || 0; state.crecheChildren = parseInt(params.get('crecheEnfants')) || 0; $('#has-creche').checked = true; $('#creche-amount').value = state.crecheAmount; $('#creche-slider').value = Math.min(state.crecheAmount, 20000); $('#creche-child-count').textContent = state.crecheChildren; $('#creche-details').classList.remove('hidden'); }
            updateVisibility();
        }

        function updateVisibility() {
            if (state.status === 'married') { $('#two-incomes-toggle').classList.remove('hidden'); $('#two-incomes-toggle').classList.add('flex'); } else { $('#two-incomes-toggle').classList.add('hidden'); state.hasTwoIncomes = false; $('#has-two-incomes').checked = false; }
            if (state.status === 'married' && state.hasTwoIncomes) { $('#income2-container').classList.remove('hidden'); } else { $('#income2-container').classList.add('hidden'); }
            if (state.status === 'married') { $('#parent-isole-container').classList.add('hidden'); state.parentIsole = false; $('#parent-isole').checked = false; } else { $('#parent-isole-container').classList.remove('hidden'); }
            if (state.hasPer) { $('#per-details').classList.remove('hidden'); } else { $('#per-details').classList.add('hidden'); }
            if (state.perPlafondUnknown) { $('#per-plafond-container').classList.add('hidden'); } else { $('#per-plafond-container').classList.remove('hidden'); }
            if (state.hasDons) { $('#dons-details').classList.remove('hidden'); } else { $('#dons-details').classList.add('hidden'); }
            // CrÃ¨che details visibility
            if (state.hasCreche) { $('#creche-details').classList.remove('hidden'); } else { $('#creche-details').classList.add('hidden'); }
        }

        function setStatus(value) {
            state.status = value;
            // Reset all buttons to default style
            document.querySelectorAll('.status-btn').forEach(btn => {
                btn.style.borderColor = '#e2e8f0';
                btn.style.backgroundColor = 'white';
                const icon = btn.querySelector('i');
                const span = btn.querySelector('span');
                if (icon) icon.style.color = '#94a3b8';
                if (span) span.style.color = '#334155';
            });
            // Highlight active button with solid indigo background
            const activeBtn = document.getElementById('btn-' + value);
            if (activeBtn) {
                activeBtn.style.borderColor = '#4f46e5';
                activeBtn.style.backgroundColor = '#4f46e5';
                const icon = activeBtn.querySelector('i');
                const span = activeBtn.querySelector('span');
                if (icon) icon.style.color = 'white';
                if (span) span.style.color = 'white';
            }
            updateVisibility();
            calculate();
        }
        // Expose to global scope for onclick handlers
        function setupEventListeners() {
            // Activer l'Ã©criture des params URL dÃ¨s la premiÃ¨re interaction
            ['input', 'click'].forEach(evt => document.addEventListener(evt, () => { userHasInteracted = true; }, { once: true }));

            // Status buttons
            $('#btn-single').addEventListener('click', () => setStatus('single'));
            $('#btn-married').addEventListener('click', () => setStatus('married'));
            $('#btn-divorced').addEventListener('click', () => setStatus('divorced'));

            $('#btn-child-plus').addEventListener('click', () => { if (state.children < 10) { state.children++; $('#child-count').textContent = state.children; updateVisibility(); calculate(); } });
            $('#btn-child-minus').addEventListener('click', () => {
                if (state.children > 0) {
                    state.children--;
                    $('#child-count').textContent = state.children;
                    // Ajuster les enfants crÃ¨che si nÃ©cessaire
                    if (state.crecheChildren > state.children) {
                        state.crecheChildren = state.children;
                        $('#creche-child-count').textContent = state.crecheChildren;
                    }
                    updateVisibility();
                    calculate();
                }
            });
            $('#parent-isole').addEventListener('change', (e) => { state.parentIsole = e.target.checked; calculate(); });

            // Sync monthly, annual and slider for income inputs
            const syncIncomeInputs = (monthlyEl, annualEl, slider, key, max = 200000) => {
                monthlyEl.addEventListener('input', (e) => {
                    const monthly = parseInt(e.target.value) || 0;
                    state[key] = monthly * 12;
                    annualEl.value = state[key];
                    slider.value = Math.min(state[key], max);
                    calculate();
                });
                annualEl.addEventListener('input', (e) => {
                    state[key] = parseInt(e.target.value) || 0;
                    monthlyEl.value = Math.round(state[key] / 12);
                    slider.value = Math.min(state[key], max);
                    calculate();
                });
                slider.addEventListener('input', (e) => {
                    state[key] = parseInt(e.target.value);
                    annualEl.value = state[key];
                    monthlyEl.value = Math.round(state[key] / 12);
                    calculate();
                });
            };
            syncIncomeInputs($('#income1-monthly'), $('#income1-input'), $('#income1-slider'), 'income1');
            syncIncomeInputs($('#income2-monthly'), $('#income2-input'), $('#income2-slider'), 'income2');

            const syncSlider = (input, slider, key, max = 200000) => {
                input.addEventListener('input', (e) => { state[key] = parseInt(e.target.value) || 0; slider.value = Math.min(state[key], max); calculate(); });
                slider.addEventListener('input', (e) => { state[key] = parseInt(e.target.value); input.value = state[key]; calculate(); });
            };
            syncSlider($('#per-amount'), $('#per-slider'), 'perAmount', 30000);
            syncSlider($('#dons-66'), $('#dons-66-slider'), 'dons66', 10000);
            syncSlider($('#dons-75'), $('#dons-75-slider'), 'dons75', 2000);

            $('#has-two-incomes').addEventListener('change', (e) => { state.hasTwoIncomes = e.target.checked; updateVisibility(); calculate(); });
            $('#income-foncier').addEventListener('input', (e) => { state.incomeFoncier = parseInt(e.target.value) || 0; calculate(); });
            $('#has-per').addEventListener('change', (e) => { state.hasPer = e.target.checked; updateVisibility(); calculate(); });
            $('#per-plafond').addEventListener('input', (e) => { state.perPlafond = parseInt(e.target.value) || 0; calculate(); });
            $('#per-plafond-unknown').addEventListener('change', (e) => { state.perPlafondUnknown = e.target.checked; updateVisibility(); calculate(); });
            $('#has-dons').addEventListener('change', (e) => { state.hasDons = e.target.checked; updateVisibility(); calculate(); });
            // CrÃ¨che event listeners
            $('#has-creche').addEventListener('change', (e) => { state.hasCreche = e.target.checked; updateVisibility(); calculate(); });
            syncSlider($('#creche-amount'), $('#creche-slider'), 'crecheAmount', 20000);
            $('#btn-creche-child-plus').addEventListener('click', () => {
                if (state.crecheChildren < state.children) {
                    state.crecheChildren++;
                    $('#creche-child-count').textContent = state.crecheChildren;
                    calculate();
                }
            });
            $('#btn-creche-child-minus').addEventListener('click', () => {
                if (state.crecheChildren > 0) {
                    state.crecheChildren--;
                    $('#creche-child-count').textContent = state.crecheChildren;
                    calculate();
                }
            });
            $('#btn-reset').addEventListener('click', () => { window.location.href = window.location.pathname; });
            $('#mobile-results-btn').addEventListener('click', () => { document.querySelector('.lg\\:col-span-5').scrollIntoView({ behavior: 'smooth', block: 'start' }); });
        }

        let userHasInteracted = window.location.search.length > 1;

        function init() {
            lucide.createIcons();
            loadFromURL();
            setupEventListeners();
            calculate();
        }

        if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', init);
        else init();
    })();
    </script>

</body>
</html>
